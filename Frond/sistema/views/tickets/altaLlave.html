<!-- USER REQUEST KEY UP FORM  rukeyup=Register Key Up-->
<div class="container">
  	<div class="panel panel-default padding-panel">
      	<div class="panel-heading">
        	<h3 class="panel-title">ALTA DE LLAVE - {{mySwitch}}</h3>
    	</div>
		<div class="panel-body">
			<div ng-if="sessionidProfile!=5">
			    <form class="form-horizontal" name="fkeyup" ng-submit="newTicket('up');" novalidate>
			    	<div ng-switch on="mySwitch">
						<fieldset ng-switch-when="PASO 1: DIRECCION">
								<legend style="visibility: hidden;"></legend>
							    <!-- Company Name-->    
					            <div class="form-group" ng-show="sessionidProfile!=3 && sessionidProfile!=5">
					              <label class="col-md-4 control-label">Administracion</label>
					                <div class="col-md-4">
					                  <div class="input-group">
					                      <span ng-show="sessionidProfile!=3 && sessionidProfile!=5" class="input-group-addon"><i class="icon-suitcase"></i></span>
					                    <input ng-show="sessionidProfile==4" name="companyN"  disabled class="form-control" ng-model="$parent.companyN" />
					                    <select ng-show="sessionidProfile==1" name="idCompanyKf" class="form-control" ng-change="officeListByCompnayID(); CallFilterFormT(); enabledNextBtn();"  ng-options="item.idCompany as item.nameCompany for item in listCompany" ng-required="sessionidProfile==1" ng-model="select.idCompanyKf"  >
					                        <option value="">Seleccione una Administracion</option>
					                      </select>
					                  </div>
					                </div>
					            </div>     
    
								<!-- Address for Onwers-->      
								<div class="form-group" ng-disable="sessionidProfile!=3" ng-show="sessionidProfile==3">
								  	<label class="col-md-4 control-label">Direcci&#243n del Consorcio</label>
									    <div class="col-md-4">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
										  		<select name="idAddressAtt" class="form-control" ng-change="enabledNextBtn(); getServicesValues(select.idAddressAtt); select.idDepartmentKf=null; getCompanyFromAdress();"  ng-options="item.idAdress as item.nameAdress for item in ListTenantAddress" ng-required="sessionidProfile!=3" ng-model="select.idAddressAtt" autofocus >
												    <option value="">Seleccione un consorcio</option>
											    </select>
										    </div>
									  	</div>
								</div>
								<!-- Address for Admins Consorcios-->      
					            <div class="form-group" ng-disable="sessionidProfile!=4" ng-show="sessionidProfile==4">
					                <label class="col-md-4 control-label">Direcci&#243n del Consorcio</label>
					                  <div class="col-md-4">
					                    <div class="input-group">
					                      <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
					                      <select name="idAddressAtt" class="form-control" ng-change="enabledNextBtn(); getDeparment(0); getServicesValues(select.idAddressAtt); select.idDepartmentKf=null;"  ng-options="item.idAdressKf as item.nameAdress for item in listOffice" ng-required="sessionidProfile!=3" ng-model="select.idAddressAtt" autofocus >
					                        <option value="" >Seleccione un consorcio</option>
					                      </select>
					                    </div>
					                  </div>
					            </div>
								<!-- Text Address for Admins-->       
								<div class="form-group" ng-disable="sessionidProfile!=1" ng-show="sessionidProfile==1">
								  	<label class="col-md-4 control-label">Direcci&#243n del Consorcio</label>
									    <div class="col-md-4">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
										  		<select name="idAddressAtt" ng-disabled="companyFound!=true" class="form-control" ng-change=" enabledNextBtn();getServicesValues(select.idAddressAtt);select.idDepartmentKf=null;"  ng-options="item.idAdressKf as item.nameAdress for item in listOffice" ng-required="sessionidProfile!=4" ng-model="select.idAddressAtt" autofocus >
												    <option value="">Seleccione un consorcio</option>
											    </select>
										    </div>
									  	</div>
								</div>
						</fieldset>
						<fieldset ng-switch-when="PASO 2: SOLICITUD PARA">
						    <div class="row">
						        <div class="col-md-12">
						            <ul class="nav nav-tabs no-bottom-border-nav"  role="tablist">
						                <li id="deptoTab" ng-init="switchTab(1); collap=1" ng-click="collap=1; switchTab(1); switchOption(); typeOption=0; typeTenant=0; select.nameAtt=null; editAttendant=false;" role="presentation" class="active">
						                    <a data-target="#departments" aria-controls="home" role="tab" data-toggle="tab">
						                        <span  class="glyphicon glyphicon-home"></span> Departamento
						                    </a>
						                </li>
						                <li ng-click="collap=2; switchTab(2); switchOption(); select.nameAtt=null; typeOption=0; typeTenant=0; editAttendant=false;" ng-if="sessionidProfile!=3 && sessionidProfile!=5" role="presentation">
						                    <a data-target="#building" aria-controls="home" role="tab" data-toggle="tab">
						                        <span class="fa icon-building"></span> Edificio
						                    </a>
						                </li>

						                <!--<li ng-if="collap==1 && sessionidProfile!=3 && sessionidProfile!=5" role="presentation" class="pull-right">
				                      		<div class="btn-group">
											  	<button type="button" class="btn btn-primary "><i class="fas fa-user-plus"></i> Nuevo</button>
											  	<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
											    	<span class="caret"></span>
											  	</button>
											  <ul class="dropdown-menu" role="menu">
											    <li ng-if="sessionidProfile!=3 && sessionidProfile!=5"><a ng-click="sysFunctionsTenant('open','add')"><i title="Registrar Propietario" class="fas fa-user"></i>  Propietario</a></li>
											    <li><a ng-click="sysFunctionsTenant('open', 'add')"><i title="Registrar Inquilino" class="fas fa-user-friends"></i> Inquilino</a></li>
											  </ul>
											</div>
						                </li>-->
						            </ul>
						            <div class="tab-content">
						                <div role="tabpanel" class="tab-pane active panel panel-default" id="departments">
						                    <div class="panel-body">
					                    		<!--*********DEPARTAMENTOS ***********-->
												<div ng-if="sessionidProfile">
													<div class="form-check form-check-inline">
														<div ng-class="sessionidProfile==3 || sessionidProfile==6 ? 'col-md-12 col-md-offset-2': 'col-md-9 col-md-offset-0'">
															<div class="col-md-6">
														  		<input id="typeTenant1" class="radio-custom" type="radio" ng-click="getData(1); saveTenant=false; enabledNextBtn();" name="typeTenant" value="1" ng-model="typeTenant" required autofocus>
														  		<label for="typeTenant1" ng-if="sessionidProfile!=5" class="radio-custom-label">
															  		<span ng-show="sessionidProfile==3 || sessionidProfile==6">{{sessionNames}}</span>
															  		<span ng-show="sessionidProfile!=3 && sessionidProfile!=6">Propietario</span>
													  			</label>
													  		</div>
													  		<div class="col-md-6">
														  		<input id="typeTenant2" class="radio-custom" ng-click="getData(2); saveTenant=false; enabledNextBtn();" type="radio" name="typeTenant" value="2" ng-model="typeTenant" required autofocus>
														  		<label for="typeTenant2" class="radio-custom-label">
															  		<span ng-show="sessionidProfile==5">{{sessionNames}}</span>
															  		<span ng-show="sessionidProfile!=5">Inquilino</span>
													  			</label> 
													  		</div>
													 	</div>
													</div>
													<br><br><br>
													<!-- Select Department -->
													<div ng-if="(sessionidProfile!=5 && typeTenant>0 && !dptoNotFound) || sessionidProfile==5 && typeTenant==2 && !dptoNotFound" class="form-group"> 
													  <label class="col-md-4 control-label">Departamento</label>
													    <div class="col-md-4 selectContainer">
														    <div class="input-group">
														        <span style="cursor: pointer;" class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
														        <select ng-model="select.idDepartmentKf" ng-change="enabledNextBtn(); saveTenant=false; searchTenant('ticket');" ng-disabled="dptoNotFound!=false" class="form-control" ng-options="x.idDepartment as x.departmentFloor for x in ListDpto " required autofocus >
														        	<option value="" >Seleccione</option>
															    	</select>
															    <span style="cursor: pointer;" ng-click="searchTenant('ticket')" ng-show="sessionidProfile==3 && typeTenant==2 || sessionidProfile!=3 && sessionidProfile!=5 && typeTenant!=0" class="input-group-addon"><a><i class="glyphicon glyphicon-search"></i> Buscar</a></span>
															    <span ng-if=" (deptoFloor!='Porteria' && deptoFloor!='porteria') && tenantNotFound" style="cursor: pointer;" ng-click="sysFunctionsTenant('open', 'add')" class="input-group-addon"><a><i class="glyphicon glyphicon-plus"></i> Habitante</a></span>
															    <span ng-if="(deptoFloor=='Porteria' || deptoFloor=='porteria') && sessionidProfile!=3 && tenantNotFound && sessionidProfile!=3 && sessionidProfile!=5" style="cursor: pointer;" ng-click="sysFunctionsAtt('open')" class="input-group-addon"><a><i class="glyphicon glyphicon-plus"></i> Encargado</a>
														  	</div>
														</div>
													</div>
													
													<div ng-show="select.idDepartmentKf!=0 && tenant.namesTenant"><br>
														<!-- Owner First Name & Lastname -->
														<div class="form-group">
														  <label class="col-md-4 control-label">Nombre y Apellido</label>  
															  <div class="col-md-4">
																  <div class="input-group">
																	  <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
																	  <input  name="namesTenant" ng-disabled="typeTenant!=0 && !isEditTenant && sessionidProfile!=0" placeholder="Nombre y Apellido" class="form-control" ng-model="tenant.namesTenant"  type="text" required="true" required autofocus />
																   		<!--BUTTONS -->
																	    <span ng-show="select.idDepartmentKf>0 && !saveTenant && tenant.namesTenant && (!isEditTenant && sessionidProfile==3 && typeTenant!=1) || (!isEditTenant && sessionidProfile!=3 && typeTenant!=0)" style="cursor: pointer;" ng-click="isEditTenant=true; saveTenant=true;" class="input-group-addon"><a><i class="glyphicon glyphicon-edit"></i> Editar</a></span>
																	    <span ng-show="saveTenant && sessionidProfile!=0" style="cursor: pointer;" ng-click="isEditTenant=false; saveTenant=false; sysFunctionsTenant('edit', 'ticket');"" class="input-group-addon"><a><i class="glyphicon glyphicon-save"></i> Guardar</a></span>
																	    <!-- //BUTTONS -->
																  </div>
															  </div>
														</div>
														<!-- Text Owner Phone 1 -->  
														<div ng-show="tenant.localPhoneTenant || isEditTenant" class="form-group">
														  <label class="col-md-4 control-label">Telefono Fijo</label>  
														    <div class="col-md-4">
															    <div class="input-group">
															        <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
															  		<input name="localPhoneTenant" ng-disabled="typeTenant!=0 && !isEditTenant && sessionidProfile!=0" ng-keydown="fnLoadPhoneMask()" placeholder="1112345678"  class="form-control input--local"  ng-model="tenant.localPhoneTenant" type="text" autofocus />
															    </div>
														  	</div>
														</div>
														<!-- Text Owner Phone 2 -->  
														<div ng-show="tenant.movilPhoneTenant || isEditTenant" class="form-group">
														  <label class="col-md-4 control-label">Telefono Celular</label>  
														    <div class="col-md-4">
															    <div class="input-group">
															        <span class="input-group-addon"><i class="glyphicon glyphicon-phone"></i></span>
															  		<input name="movilPhoneTenant" ng-disabled="typeTenant!=0 && !isEditTenant && sessionidProfile!=0" ng-keydown="fnLoadPhoneMask()" placeholder="91112345678" class="form-control input--movil"  ng-model="tenant.movilPhoneTenant" type="text" autofocus />
															    </div>
														  	</div>
														</div>
														<!-- Text Mail-->
														<div class="form-group">
														 <label class="col-md-4 control-label">E-Mail</label>  
														   <div class="col-md-4">
														    <div class="input-group">
														    	<span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
														  		<input name="emailTenant" ng-disabled="typeTenant!=0 && !isEditTenant && sessionidProfile!=0" placeholder="E-Mail" class="form-control" ng-model="tenant.emailTenant"  type="email" required autofocus />
														    </div>
														  </div>
														</div>
													</div>
												</div>
						                    </div>
						                </div>
							            <div ng-if="sessionidProfile!=3 && sessionidProfile!=5" role="tabpanel" class="tab-pane panel panel-default" id="building">
							                <div class="panel-body">
            									<!--*********************EDIFICIO *******************************-->
												<div class="form-check form-check-inline">
														<div class="col-md-12 col-md-offset-2">
															<div class="col-md-6">
														  		<input id="typeOption1" type="radio" class="radio-custom" ng-click="enabledNextBtn(1); editAttendant=false; typeOption=1; getAllAttendant(); switchOption(); select.nameAtt=null" name="typeOption" value="1" ng-model="typeOption" required autofocus>
														  		<label for="typeOption1" class="radio-custom-label">
															  		<span >Encargado titular / Otros</span>
													  			</label> 
													  		</div>
													  		<div class="col-md-6">
														  		<input id="typeOption2" class="radio-custom" ng-click="enabledNextBtn(2); typeOption=2; editAttendant=false; select.nameAtt=null; switchOption();" type="radio" name="typeOption" value="2" ng-model="typeOption" required autofocus>
														  		<label for="typeOption2" class="radio-custom-label">
															  		<span>Admin. del Consorcio</span>
													  			</label>
													  		</div>
												  		<!--<label class="col-xs-4">
													  		<input ng-click="  enabledNextBtn(3); typeOption=3" type="radio" name="typeOption" value="3" ng-model="typeOption" required autofocus>
														  		<code>Otros</code>
												  		</label>-->
												 	</div>
												</div>
												
												<div ng-if="typeOption==1 && typeOption!=undefined"><br><br><br>
													<!-- Encargado First Name & Lastname -->
													<div class="form-group" ng-disable="sessionidProfile!=2" ng-show="sessionidProfile!=2">
													  	<label class="col-md-3 control-label">Nombres</label>  
														    <div class="col-md-6">
															    <div class="input-group">
															        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
															  		<select name="nameAtt" class="form-control" ng-disabled="attendantFound!=true"  ng-options="selectedAtt.idUser as combined(selectedAtt) for selectedAtt in listAttendant" ng-required="sessionidProfile!=2" ng-change="getAttData('request'); editAttendant=false; isAttUpdated=false; saveAttendant=false; enabledNextBtn(1);" ng-model="select.nameAtt" autofocus >
																	    <option value="">Seleccione un encargado</option>
																    </select>
																    <!--BUTTONS -->
																    <span ng-show="attendantFound==true && sessionidProfile!=3 && select.nameAtt && !saveAttendant" style="cursor: pointer;" ng-click="editAttendant=true; saveAttendant=true;" class="input-group-addon"><a><i class="glyphicon glyphicon-edit"></i> Editar</a></span>
																    <span ng-show="attendantFound==true && sessionidProfile!=3 && select.nameAtt && editAttendant" style="cursor: pointer;" ng-click="editAttendant=false; sysFunctionsAtt('update','request'); enabledNextBtn(1); saveAttendant=false;" class="input-group-addon"><a><i class="glyphicon glyphicon-save"></i> Guardar</a></span>
																    <span ng-show="(!attendantFound || attendantFound) && sessionidProfile!=3 && !select.nameAtt && select.idAddressAtt" style="cursor: pointer;" ng-click="sysFunctionsAtt('open')" class="input-group-addon"><a><i class="glyphicon glyphicon-plus"></i> Registrar</a>
																    </span>
																    <!-- //BUTTONS -->
															    </div>
														  	</div>
													</div>
													
										            <!-- Other Attendant Function -->
										            <div ng-show="select.nameAtt && att.idTypeAttKf==1 || editAttendant && att.idTypeAttKf==1" class="form-group">
										              <label class="col-md-3 control-label">Función</label>  
										                <div class="col-md-6">
										                  <div class="input-group">
										                    <span class="input-group-addon"><i class="glyphicon glyphicon-tag"></i></span>
										                    <input  name="descOther" placeholder="Funcion que realiza" ng-disabled="!editAttendant && sessionidProfile!=0" class="form-control" ng-model="tmp.descOther"  type="text" required autofocus/>
										                  </div>
										                </div>
										            </div>
													<!-- Text Local Phone -->       
													<div ng-if="select.nameAtt && tmp.localPhoneAtt || editAttendant" class="form-group">
													  <label class="col-md-3 control-label">Telefono Fijo</label>  
													    <div class="col-md-6">
														    <div class="input-group">
														        <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
															  		<input name="localPhoneAtt" ng-disabled="!editAttendant && sessionidProfile!=0" ng-keydown="fnLoadPhoneMask()" placeholder="1112345678" class="form-control input--movil"  ng-model="tmp.localPhoneAtt" type="text" ng-required="tmp.movilPhoneAtt!=''" autofocus />
														    </div>
													  </div>
													</div>
													<!-- Text Phone 2 -->       
													<div ng-if="select.nameAtt && tmp.movilPhoneAtt || editAttendant" class="form-group">
													  <label class="col-md-3 control-label">Telefono Celular</label>  
													    <div class="col-md-6">
														    <div class="input-group">
														        <span class="input-group-addon"><i class="glyphicon glyphicon-phone"></i></span>
														  		<input name="movilPhoneAtt" ng-disabled="!editAttendant && sessionidProfile!=0" ng-keydown="fnLoadPhoneMask()" placeholder="91112345678" class="form-control input--movil"   ng-model="tmp.movilPhoneAtt" type="text" ng-required="tmp.localPhoneAtt!=''" autofocus />
														    </div>
													  </div>
													</div>
													<!-- Text Mail-->
													<div ng-if="select.nameAtt && tmp.emailAtt || editAttendant" class="form-group">
													 <label class="col-md-3 control-label">E-Mail</label>
													   <div class="col-md-6">
													    <div class="input-group">
													    	<span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
													  		<input name="emailAtt" ng-disabled="true" placeholder="E-Mail" class="form-control" ng-model="tmp.emailAtt"  type="email" required autofocus />
													    </div>
													  </div>
													</div>
												</div>
												<br><br><br>
												<!-- Request made for Building Selected in the First Step-->
												<div ng-show="typeOption==2 && typeOption!=undefined" class="container-fluid">
													<div  class="row">
														<div class="col-md-8 col-md-offset-2">
														    <div class="alert alert-success" role="alert">
											                 <span style="text-align: center;"> La solicitud sera asignada a la Administracion del consorcio. <span style="font-weight: bold;">{{companyN}}</span></span>
											             	</div>
											            </div>
													</div>
												</div>
							            	</div>
						            	</div>
						        	</div>
						    	</div>
						    </div>
						</fieldset>
						<fieldset ng-switch-when="PASO 3: DATOS DE LA SOLICITUD">
							<div class="container-fluid justify-content-md-center">
								<!-- Form Key Quantity qku = Quantity Keys Up-->
								<div class="form-group col-md-6">
								  <label class="col-xs-12 col-md-offset-1" >Cantidad de llaves</label> 
									<div class="col-md-10 col-md-offset-1 input-group">
							  		  <span class="input-group-addon"><i class="glyphicon icon-key"></i></span>
							  			<select name="qkuTenant" ng-change="getTotalService(); getAllAttendant();" class="form-control" placeholder="Seleccione la cantidad de llaves"  ng-model="quantity.qkuTenant" required autofocus >
											    <option value=""></option>
											    <option value="1">1</option>
											    <option value="2">2</option>
											    <option value="3">3</option>
											    <option value="4">4</option>
											    <option value="5">5</option>
								    	</select>
							    	</div>
								</div>
								<!-- Select Type of Delivery -->   
								<div class="form-group col-md-6"> 
								  <label class="col-xs-12 col-md-offset-2">Tipo de Entrega</label>
								    <div class="col-md-10 col-md-offset-2 input-group">
								        <span class="input-group-addon"><i class="glyphicon icon-truck"></i></span>
										    <select name="idTypeDeliveryKf" ng-change="getTotalService(); getAllAttendant(); delivery.nameAtt=null; select.whoPickUp=Null" class="form-control" ng-change=""  ng-options="item.idTypeDelivery as item.typeDelivery for item in listTypeDelivery" ng-model="delivery.idTypeDeliveryKf" required autofocus >
										    <option value=""></option>
									    	</select>
								  	</div>
								</div>
							</div>
							<div class="container-fluid">
								<div ng-show="delivery.idTypeDeliveryKf">
									<div class="form-group col-md-10" ng-disable="sessionidProfile!=2" ng-show="sessionidProfile!=2">
									  	<label ng-if="delivery.idTypeDeliveryKf==1" class="col-xs-12 col-md-offset-8">Quien retira</label>
									  	<label ng-if="delivery.idTypeDeliveryKf==2" class="col-xs-12 col-md-offset-8">Quien recibe</label>  
									    <div class="col-md-6 col-md-offset-8">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
										  		<select name="whoPickUp" class="form-control" required ng-change=" enabledNextBtn(); delivery.nameAtt=null" ng-model="select.whoPickUp" autofocus >
												    <option value=""></option>
											    	<option ng-if="delivery.idTypeDeliveryKf==1" value="1">Titular</option>
											    	<option ng-if="delivery.idTypeDeliveryKf==2" value="2">Encargado</option>
											    	<option value="3">Tercera persona</option>
											    </select>
										    </div>
									  	</div>
									</div>
								</div>
								<!-- SHOW THE OWNER WHOM PICKUP OR RECEIVED THE KEY -->
								<div ng-if="delivery.idTypeDeliveryKf!=0 && select.whoPickUp!=0"  class="form-group col-md-10">
									    <div class="col-md-6 col-md-offset-8">
										    <div ng-if="(select.whoPickUp==1 && select.nameAtt!= delivery.nameAtt && collap==2 ) || (select.whoPickUp==2 && select.nameAtt == delivery.nameAtt && collap==2) || (select.whoPickUp==1 && collap==1)" class="alert alert-success" role="alert">
							                 <span style="text-align: center;">La solicitud sera
							                 	<span ng-if="delivery.idTypeDeliveryKf==1">retirada por el</span>
							                 	<span ng-if="delivery.idTypeDeliveryKf==2">entregada al</span>
							                 	<span ng-if="collap==2 && typeOption==1"> encargado titular</span>
							                 	<span ng-if="collap==1 && typeTenant==1"> propietario</span>
							                 	<span ng-if="collap==1 && typeTenant==2"> inquilino</span>
							                 	: <br>
							                 	<span ng-if="collap==2 && typeOption==1" style="font-weight: bold;">{{userAtt.attendant.fullNameUser}}</span>
							                 	<span ng-if="collap==1 && typeTenant!=0" style="font-weight: bold;">{{tenant.namesTenant}}</span>
							                 </span>
							             	</div>
									  </div>
									</div>
								<!-- **********************************************************************************************-->
								<!-- Attendant Info -->
								<div ng-show="delivery.idTypeDeliveryKf==2 && select.whoPickUp==2 && select.nameAtt != delivery.nameAtt"><br>
									<div class="col-md-4 col-md-offset-7"><legend style="text-align: center;">DATOS DEL ENCARGADO</legend></div>
									<!-- Encargado First Name & Lastname -->
									<div class="form-group col-md-10" ng-disable="sessionidProfile!=2" ng-show="sessionidProfile!=2">
									  	<label class="col-xs-12 col-md-offset-8">Nombres</label>  
									    <div class="col-md-6 col-md-offset-8">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
										  		<select name="nameAtt" class="form-control" ng-disabled="attendantFound!=true"  ng-options="item.idUser as combined(item) for item in listAttendant" ng-required="select.whoPickUp==2" ng-change="getAttData('delivery'); editAttendant=false; isAttUpdated=false; saveAttendant=false; enabledNextBtn();" ng-model="delivery.nameAtt" autofocus >
												    <option value="">Seleccione un encargado</option>
											    </select>
											    <!--BUTTONS -->
											    <span ng-show="attendantFound==true && sessionidProfile!=3 && delivery.nameAtt && !saveAttendant" style="cursor: pointer;" ng-click="editAttendant=true; saveAttendant=true;" class="input-group-addon"><a><i class="glyphicon glyphicon-edit"></i> Editar</a></span>
											    <span ng-show="attendantFound==true && sessionidProfile!=3 && delivery.nameAtt && editAttendant" style="cursor: pointer;" ng-click="editAttendant=false; sysFunctionsAtt('update','delivery'); saveAttendant=false;" class="input-group-addon"><a><i class="glyphicon glyphicon-save"></i> Guardar</a></span>
											    <span ng-show="(!attendantFound || attendantFound) && sessionidProfile!=3 && !delivery.nameAtt && select.idAddressAtt" style="cursor: pointer;" ng-click="sysFunctionsAtt('open')" class="input-group-addon"><a><i class="glyphicon glyphicon-plus"></i> Registrar</a>
											    </span>
											    <!-- //BUTTONS -->
										    </div>
									  	</div>
									</div>
									<!-- Text Local Phone -->       
									<div class="form-group col-md-10">
									  <label class="col-xs-12 col-md-offset-8">Telefono Fijo</label>  
									    <div class="col-md-6 col-md-offset-8">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
											  		<input name="deliverylocalPhoneAtt" ng-disabled="!editAttendant && sessionidProfile!=0" placeholder="1112345678" class="form-control input--local" ng-keydown="fnLoadPhoneMask()"  ng-model="delivery.localPhoneAtt" type="text" ng-required="select.whoPickUp==2" autofocus />
										    </div>
									  </div>
									</div>
									<!-- Text Phone 2 -->       
									<div class="form-group col-md-10">
									  <label class="col-xs-12 col-md-offset-8">Telefono Celular</label>  
									    <div class="col-md-6 col-md-offset-8">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-phone"></i></span>
										  		<input name="deliverymovilPhoneAtt" ng-disabled="!editAttendant && sessionidProfile!=0" placeholder="91112345678" class="form-control input--movil" ng-keydown="fnLoadPhoneMask()"  ng-model="delivery.movilPhoneAtt" type="text" ng-required="select.whoPickUp==2" autofocus />
										    </div>
									  </div>
									</div>
									<!-- Text Mail-->
									<div class="form-group col-md-10">
									 <label class="col-xs-12 col-md-offset-8">E-Mail</label>
									   <div class="col-md-6 col-md-offset-8">
									    <div class="input-group">
									    	<span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
									  		<input name="deliveryemailAtt" ng-disabled="!editAttendant && sessionidProfile!=0" placeholder="E-Mail" class="form-control" ng-model="delivery.emailAtt"  type="email" ng-required="select.whoPickUp==2" autofocus />
									    </div>
									  </div>
									</div>
								</div>

								<!-- **********************************************************************************************-->
								<!-- Third Person -->
								<div ng-show="delivery.idTypeDeliveryKf && select.whoPickUp==3">
									<!-- Names Third Person -->       
									<div class="form-group col-md-10">
									  <label class="col-xs-12 col-md-offset-8">Nombres</label>  
									    <div class="col-md-6 col-md-offset-8">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
											  		<input name="namesthird" class="form-control" ng-blur="enabledNextBtn();" ng-model="third.names" type="text" ng-required="select.whoPickUp==3" autofocus />
										    </div>
									  </div>
									</div>
									<!-- Contact Phone Third Person -->       
									<div class="form-group col-md-10">
									  <label class="col-xs-12 col-md-offset-8">Telefono contacto</label>  
									    <div class="col-md-6 col-md-offset-8">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-phone"></i></span>
										  		<input name="movilPhonethird" placeholder="91112345678" ng-keydown="fnLoadPhoneMask(); enabledNextBtn();" class="form-control input--movil"  ng-model="third.movilPhone" type="text" ng-required="select.whoPickUp==3" autofocus />
										    </div>
									  </div>
									</div>
									<!-- Email Third Person-->
									<div class="form-group col-md-10">
									 <label class="col-xs-12 col-md-offset-8">Documento N°: </label>
									   <div class="col-md-6 col-md-offset-8">
									    <div class="input-group">
									    	<span class="input-group-addon"><i class="glyphicon glyphicon-qrcode"></i></span>
									  		<input name="dnithird" placeholder="99.999.999" class="form-control input--dni" ng-minlength="8" ng-maxlength="8" ng-keydown="fnLoadPhoneMask(); enabledNextBtn();" ng-model="third.dni" type="text" ng-required="select.whoPickUp==3" autofocus />
									    </div>
									  </div>
									</div>
								</div>
							</div>
							<div class="row">
								<!-- Form Special Request sru= Special Request Up -->
								<div style="margin-left: 15px; padding-right: 40px;" class="form-group col-md-12">
								  <label class="col-xs-12" >Observaciones Adicionales</label> 
									<div class="col-md-12 input-group">
								  		<textarea style="resize: vertical;" name="sruTenant" rows="9" placeholder="Describa aqui si desea realizar una solicitud especial." class="form-control" ng-model="txt.sruTenant" ></textarea>
									</div>
								</div>
							</div>
							<div class="row" style="margin-left: 25px;">
								<div class="form-group col-md-12 "> 
									<legend>Costos de Servicios</legend>
									  <div class="col-md-3">
									  	<label class="control-label">Gestion</label> 
										  <div class=" input-group">
											  <input id="inputService" title="Gestion Sin Costo" data-placement="bottom" data-content="El costo esta incluido en el Abono del Mantenimiento." disabled style="text-align: right;"  name="cost.service" placeholder="$0,00" class="form-control" ng-model="cost.service"  type="text" required autofocus/>
										  </div>
									  </div>
									  <div class="col-md-3 ">
									  	<label class="control-label">Llave</label> 
										  <div class="input-group">
											  <input disabled  style="text-align: right;"" name="cost.key" autofocus="true" placeholder="$0,00" class="form-control" ng-model="cost.key"  type="text" required autofocus/>
										  </div>
									  </div>
									  <div class="col-md-3">
									  	<label class="control-label">Envio</label> 
										  <div class="input-group">
											  <input id="inputDelivery" title="Envio sin Costo" disabled style="text-align: right;"" name="cost.delivery" placeholder="$0,00" class="form-control" ng-model="cost.delivery"  type="text" required autofocus/>
										  </div>
									  </div>
									  <div class="col-md-3 "> 
									  	<label class="control-label">Total</label> 
										  <div class="input-group">
											  <input disabled style="text-align: right"; name="cost.total"placeholder="$0,00" class="form-control" ng-model="cost.total"  type="text" required autofocus/>
										  </div>
									  </div>
								</div>
							</div>
						</fieldset>
					</div>
					<!-- Actions Button -->
					<div class="form-group pull-right">
					  <div class="col-md-12">
					  	<input type="button" ng-click="decrementStep();" ng-show="btnBack" class="btn btn-primary" value="Atras" />	
				  		<input type="button" ng-click="incrementStep(); enabledNextBtn();" ng-disabled="formValidated!=true" ng-show="btnShow" class="btn btn-primary" value="Siguiente"/>
				  		<button type="submit" ng-show="!hasNextStep()" ng-disabled="fkeyup.$invalid" class="btn btn-primary" >Enviar</button>
					  </div><!--  -->
					</div>
				</form>
			</div>
			<div ng-if="sessionidProfile==5">
			    <form class="form-horizontal" name="fkeyup" ng-submit="newTicket('up');" novalidate>
			    	<div ng-switch on="mySwitch">
						<fieldset ng-init="getServicesValues(sessionidAddress); enabledNextBtn(); " ng-switch-when="PASO 1: DATOS PERSONALES">
								<legend style="visibility: hidden;"></legend>
							    <!-- Company Name-->    
					            <div class="form-group col-md-6">
					              <label class="col-xs-12 col-md-offset-1" >Administracion</label>
					                <div class="col-md-10 col-md-offset-1 input-group">
					                    <span class="input-group-addon"><i class="icon-suitcase"></i></span>
					                    <input name="companyN"  disabled class="form-control" ng-model="$parent.companyN" />
					                </div>
					            </div>     
    
								<!-- Address for tenant-->      
								<div class="form-group col-md-6">
								  	<label class="col-xs-12 col-md-offset-1" >Direcci&#243n del Consorcio</label>
									    <div class="col-md-10 col-md-offset-1 input-group">
									        <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
										    <input name="idAddressAtt"  disabled class="form-control" ng-model="$parent.idAddressAtt" />
									    </div>
								</div>
								<!-- Address for tenant-->      
								<div class="form-group col-md-6">
								  	<label class="col-xs-12 col-md-offset-1" >Habitante</label>
									    <div class="col-md-10 col-md-offset-1 input-group">
									        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
										    <input name="namesTenant"  disabled class="form-control" ng-model="$parent.namesTenant" />
									    </div>
								</div>
								<!-- departmento for tenant-->      
								<div class="form-group col-md-6">
								  	<label class="col-xs-12 col-md-offset-1" >Departamento</label>
									    <div class="col-md-10 col-md-offset-1 input-group">
									        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
										    <input name="deptoTenant"  disabled class="form-control" ng-model="$parent.deptoTenant" />
									    </div>
								</div>
						</fieldset>
						<fieldset ng-init="btnClose=false" ng-switch-when="PASO 2: DATOS DE LA SOLICITUD">
							<div class="container-fluid justify-content-md-center">
								<!-- Form Key Quantity qku = Quantity Keys Up-->
								<div class="form-group col-md-6">
								  <label class="col-xs-10 col-md-offset-0" >Cantidad de llaves</label> 
									<div class="col-md-10 col-md-offset-0 input-group">
							  		  <span class="input-group-addon"><i class="glyphicon icon-key"></i></span>
							  			<select name="qkuTenant" ng-change="getTotalService(); getAllAttendant();" class="form-control" placeholder="Seleccione la cantidad de llaves"  ng-model="quantity.qkuTenant" required autofocus >
											    <option value=""></option>
											    <option value="1">1</option>
											    <option value="2">2</option>
											    <option value="3">3</option>
											    <option value="4">4</option>
											    <option value="5">5</option>
								    	</select>
							    	</div>
								</div>
								<!-- Select Type of Delivery -->   
								<div class="form-group col-md-6"> 
								  <label class="col-xs-12 col-md-offset-2">Tipo de Entrega</label>
								    <div class="col-md-11 col-md-offset-2 input-group">
								        <span class="input-group-addon"><i class="glyphicon icon-truck"></i></span>
										    <select name="idTypeDeliveryKf" ng-change="getTotalService(); getAllAttendant(); delivery.nameAtt=null; select.whoPickUp=Null" class="form-control" ng-change=""  ng-options="item.idTypeDelivery as item.typeDelivery for item in listTypeDelivery" ng-model="delivery.idTypeDeliveryKf" required autofocus >
										    <option value=""></option>
									    	</select>
								  	</div>
								</div>
							</div>
							<div class="container-fluid">
								<div ng-show="delivery.idTypeDeliveryKf">
									<div class="form-group col-md-10" ng-disable="sessionidProfile!=2" ng-show="sessionidProfile!=2">
									  	<label ng-if="delivery.idTypeDeliveryKf==1" class="col-xs-12 col-md-offset-8">Quien retira</label>
									  	<label ng-if="delivery.idTypeDeliveryKf==2" class="col-xs-12 col-md-offset-8">Quien recibe</label>  
									    <div class="col-md-7 col-md-offset-8">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
										  		<select name="whoPickUp" class="form-control" required ng-change=" enabledNextBtn(); delivery.nameAtt=null" ng-model="select.whoPickUp" autofocus >
												    <option value=""></option>
											    	<option ng-if="delivery.idTypeDeliveryKf==1" value="1">Titular</option>
											    	<option ng-if="delivery.idTypeDeliveryKf==2" value="2">Encargado</option>
											    	<option value="3">Tercera persona</option>
											    </select>
										    </div>
									  	</div>
									</div>
								</div>
								<!-- SHOW THE OWNER WHOM PICKUP OR RECEIVED THE KEY -->
								<div ng-if="delivery.idTypeDeliveryKf!=0 && select.whoPickUp>0 && select.whoPickUp<3"  class="form-group col-md-10">
									    <div class="col-md-7 col-md-offset-8">
										    <div class="alert alert-success" role="alert">
							                 	<span style="text-align: center;">La solicitud sera
								                 	<span ng-if="delivery.idTypeDeliveryKf==1">retirada por titular: </span>
								                 	<span ng-if="delivery.idTypeDeliveryKf==2">entregada al</span>
						                 			<span ng-if="delivery.idTypeDeliveryKf==2 && select.whoPickUp==2">encargado: </span>
							                 		<span ng-if="delivery.idTypeDeliveryKf==1 && select.whoPickUp==1" style="font-weight: bold;">{{sessionNames}}</span>

							                 	</span>
             									<!-- Attendant Info -->
											    <div ng-if="delivery.idTypeDeliveryKf==2 && select.whoPickUp==2 && !delivery.nameAtt && !btnClose" class="input-group col-md-12">
											  		<select name="nameAtt" class="form-control" ng-disabled="attendantFound!=true"  ng-options="item.idUser as combined(item) for item in listAttendant" ng-required="select.whoPickUp==2" ng-change="getAttData('delivery'); btnClose=true; enabledNextBtn();" ng-model="delivery.nameAtt" autofocus >
													    <option value="">Seleccione un encargado</option>
												    </select>
											    </div>
											    <span ng-if="delivery.nameAtt" style="font-weight: bold;">{{delivery.fullNamesAtt}}
												    <span ng-if="delivery.nameAtt" style="cursor: pointer;" data-toggle="tooltip" data-placement="bottom" title="Seleccionar otro encargado" ng-click="selectAnotherAtt()" ><i class="glyphicon glyphicon-remove-circle"></i></span>
												</span>
							             	</div>
									  </div>
									</div>
								<!-- **********************************************************************************************-->

								<!-- **********************************************************************************************-->
								<!-- Third Person -->
								<div ng-show="delivery.idTypeDeliveryKf && select.whoPickUp==3">
									<!-- Names Third Person -->       
									<div class="form-group col-md-10">
									  <label class="col-xs-12 col-md-offset-8">Nombres</label>  
									    <div class="col-md-6 col-md-offset-8">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
											  		<input name="namesthird" class="form-control" ng-blur="enabledNextBtn();" ng-model="third.names" type="text" ng-required="select.whoPickUp==3" autofocus />
										    </div>
									  </div>
									</div>
									<!-- Contact Phone Third Person -->       
									<div class="form-group col-md-10">
									  <label class="col-xs-12 col-md-offset-8">Telefono contacto</label>  
									    <div class="col-md-6 col-md-offset-8">
										    <div class="input-group">
										        <span class="input-group-addon"><i class="glyphicon glyphicon-phone"></i></span>
										  		<input name="movilPhonethird" placeholder="91112345678" ng-keydown="fnLoadPhoneMask(); enabledNextBtn();" class="form-control input--movil"  ng-model="third.movilPhone" type="text" ng-required="select.whoPickUp==3" autofocus />
										    </div>
									  </div>
									</div>
									<!-- Email Third Person-->
									<div class="form-group col-md-10">
									 <label class="col-xs-12 col-md-offset-8">Documento N°: </label>
									   <div class="col-md-6 col-md-offset-8">
									    <div class="input-group">
									    	<span class="input-group-addon"><i class="glyphicon glyphicon-qrcode"></i></span>
									  		<input name="dnithird" placeholder="99.999.999" class="form-control input--dni" ng-minlength="8" ng-maxlength="8" ng-keydown="fnLoadPhoneMask(); enabledNextBtn();" ng-model="third.dni" type="text" ng-required="select.whoPickUp==3" autofocus />
									    </div>
									  </div>
									</div>
								</div>
							</div>
							<div class="row">
								<!-- Form Special Request sru= Special Request Up -->
								<div style="margin-left: 15px; padding-right: 40px;" class="form-group col-md-12">
								  <label class="col-xs-12" >Observaciones Adicionales</label> 
									<div class="col-md-12 input-group">
								  		<textarea style="resize: vertical;" name="sruTenant" rows="9" placeholder="Describa aqui si desea realizar una solicitud especial." class="form-control" ng-model="txt.sruTenant" ></textarea>
									</div>
								</div>
							</div>
							<div class="row" style="margin-left: 25px;">
								<div class="form-group col-md-12 "> 
									<legend>Costos de Servicios</legend>
									  <div class="col-md-3">
									  	<label class="control-label">Gestion</label> 
										  <div class=" input-group">
											  <input id="inputService" title="Gestion Sin Costo" data-placement="bottom" data-content="El costo esta incluido en el Abono del Mantenimiento." disabled style="text-align: right;"  name="cost.service" placeholder="$0,00" class="form-control" ng-model="cost.service"  type="text" required autofocus/>
										  </div>
									  </div>
									  <div class="col-md-3 ">
									  	<label class="control-label">Llave</label> 
										  <div class="input-group">
											  <input disabled  style="text-align: right;"" name="cost.key" autofocus="true" placeholder="$0,00" class="form-control" ng-model="cost.key"  type="text" required autofocus/>
										  </div>
									  </div>
									  <div class="col-md-3">
									  	<label class="control-label">Envio</label> 
										  <div class="input-group">
											  <input id="inputDelivery" title="Envio sin Costo" disabled style="text-align: right;"" name="cost.delivery" placeholder="$0,00" class="form-control" ng-model="cost.delivery"  type="text" required autofocus/>
										  </div>
									  </div>
									  <div class="col-md-3 "> 
									  	<label class="control-label">Total</label> 
										  <div class="input-group">
											  <input disabled style="text-align: right"; name="cost.total"placeholder="$0,00" class="form-control" ng-model="cost.total"  type="text" required autofocus/>
										  </div>
									  </div>
								</div>
							</div>
						</fieldset>
					</div>
					<!-- Actions Button -->
					<div class="form-group pull-right">
					  <div class="col-md-12">
					  	<input type="button" ng-click="decrementStep();" ng-show="btnBack" class="btn btn-primary" value="Atras" />	
				  		<input type="button" ng-click="incrementStep(); enabledNextBtn();" ng-disabled="formValidated!=true" ng-show="btnShow" class="btn btn-primary" value="Siguiente"/>
				  		<button type="submit" ng-show="!hasNextStep()" ng-disabled="fkeyup.$invalid" class="btn btn-primary" >Enviar</button>
					  </div><!--  -->
					</div>
				</form>
			</div>
		</div>
	</div>
</div>