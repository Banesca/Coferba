<!-- USER REQUEST OTHER QUERIES  ruother=Register Request User Other Queries-->
<div ng-class="sessionidProfile==5 || (sessionidProfile==6 && sessionidTypeTenant==2)?'col-md-6 col-md-offset-3':'col-md-12'">
  <div class="panel panel-default padding-panel">
    <div class="panel-heading">
      <h3 class="panel-title">GESTION DE EDIFICIO</h3>
    </div>
    <div class="panel-body">
      <div ng-if="sessionidProfile!=5 || (sessionidProfile==6 && sessionidTypeTenant==1)">
        <form class="form-horizontal" name="frmDpto" ng-submit="fnAssignDepto(select.idDepartmentKf,0)">
              <fieldset>
                <!-- Company Name-->    
                <div ng-show="sessionidProfile!=3 && sessionidProfile!=5 && sessionidProfile!=6" class="form-group col-md-6">
                  <label style="padding-left: 15px;">Administracion</label>
                    <div class="col-xs-12">
                      <div class="input-group">
                          <span class="input-group-addon"><i class="icon-suitcase"></i></span>
                        <input ng-show="sessionidProfile==4" name="companyN"  disabled class="form-control" ng-model="$parent.companyN" />

                          <ui-select ng-show="sessionidProfile==1" ng-model="selectIdCompanyKf.selected" on-select="onSelectCallback()" ng-change="officeListByCompnayID(selectIdCompanyKf.selected.idCompany);">
                            <ui-select-match allow-clear="true" placeholder="Seleccione una administracion">{{$select.selected.nameCompany}}</ui-select-match>
                              <ui-select-choices repeat="data in listCompany | filter: $select.search">
                                <div ng-bind-html="data.nameCompany | highlight: $select.search"></div>
                                  <small ng-bind-html="data.mail_admin | highlight: $select.search"></small>
                              </ui-select-choices>
                          </ui-select>
                      </div>
                    </div>
                </div>
                <!-- Address for Owner-->      
                <div ng-show="sessionidProfile==3 || sessionidProfile==5 || sessionidProfile==6" class="form-group col-md-6">
                   <label style="padding-left: 15px;">Consorcio</label>
                      <div class="col-xs-12">
                        <div class="input-group">
                          <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
                          <ui-select name="idAddressAtt" ng-disabled="sessionidProfile==1 && selectIdCompanyKf.selected==''" ng-change="getDeparment(1,selectIdAddressKf.selected.idAdress); listUserDepto(1, selectIdAddressKf.selected.idAdress); collap=1; isCollapsed=false;" ng-required="sessionidProfile!=4" ng-model="selectIdAddressKf.selected" autofocus>
                            <ui-select-match allow-clear="true" placeholder="Seleccione una direccion">{{$select.selected.nameAdress}}</ui-select-match>
                              <ui-select-choices repeat="data in ListTenantAddress | filter: $select.search">
                                <div ng-bind-html="data.nameAdress | highlight: $select.search"></div>
                                  <!--<small>Costo de Gestion: </small><small ng-bind-html="item.priceManagement | highlight: $select.search"></small>
                                  <small>Costo de Envio: </small><small ng-bind-html="item.priceShipping | highlight: $select.search"></small>-->
                              </ui-select-choices>
                          </ui-select>
                          <span ng-show="selectIdAddressKf.selected!=0" style="cursor: pointer;" class="input-group-addon"><i ng-click="getDeparment(1,selectIdAddressKf.selected.idAdress); listUserDepto(1,selectIdAddressKf.selected.idAdress);" class="glyphicon glyphicon-refresh"></i></span>
                        </div>
                      </div>
                </div>
                <!-- Address for Admins-->      
                <div ng-show="sessionidProfile!=3 && sessionidProfile!=5 && sessionidProfile!=6" class="form-group col-md-6">
                    <label style="padding-left: 15px;">Consorcio</label>
                      <div class="col-xs-12">
                        <div class="input-group">
                          <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
       
                          <ui-select name="idAddressAtt" ng-disabled="(!companyFound && sessionidProfile==1)" ng-change="getDeparment(1,selectIdAddressKf.selected.idAdress); listUserDepto(1,selectIdAddressKf.selected.idAdress); getAllAttendant(selectIdAddressKf.selected.idAdress); idDepartmentKf=''; " ng-required="sessionidProfile!=3" ng-model="selectIdAddressKf.selected" autofocus>
                            <ui-select-match allow-clear="true" placeholder="Seleccione una direccion">{{$select.selected.nameAdress}}</ui-select-match>
                              <ui-select-choices repeat="data in listOffice | filter: $select.search">
                                <div ng-bind-html="data.nameAdress | highlight: $select.search"></div>
                                  <!--<small ng-bind-html="item.nameCompany | highlight: $select.search"></small>-->
                              </ui-select-choices>
                          </ui-select>
                          <span ng-show="selectIdAddressKf.selected!=0 && sessionidProfile==3" style="cursor: pointer;" class="input-group-addon"><i ng-click="listUserDepto(1,selectIdAddressKf.selected.idAdress); getAllAttendant(selectIdAddressKf.selected.idAdress);" class="glyphicon glyphicon-refresh"></i></span>
                        </div>
                      </div>
                </div>
                <!-- Select Department -->
                      <div ng-show="sessionidProfile==3 || sessionidProfile==5 || sessionidProfile==6" class="form-group col-md-4">
                        <label style="padding-left: 15px;">Departamento</label>
                          <div class="col-xs-12 selectContainer">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon icon-building"></i></span>
                                <select ng-model="select.idDepartmentKf"  ng-disabled="dptoNotFound!=false" class="form-control" ng-options="x.idDepartment as x.departmentFloor for x in ListDpto " required autofocus >
                                  <option value="">Seleccione</option>
                                </select>
                            </div>
                        </div>
                      </div>
                <!-- Actions Button -->
                <div ng-show="sessionidProfile==3 || sessionidProfile==5 || sessionidProfile==6" class="form-group col-md-2">
                  <br>
                  <div class="col-xs-12">
                    <button type="submit" class="btn btn-primary" ng-disabled="dptoNotFound!=false" >Asociar</button>
                  </div>
                </div>
              </fieldset>
        </form>
        <div class="clearfix"></div> 
        <div class="col-lg-12">
          <div ng-show="noRecordsFound && (sessionidProfile==3 || sessionidProfile==5 || sessionidProfile==6)" class="alert alert-info" role="alert">
            <strong>INFO: </strong>Estimado/a, <strong>{{sessionNames}}</strong> No existen departamentos asociados a la direccion seleccionada.
          </div>
          <div ng-show="noRecordsFound && sessionidProfile!=3 && sessionidProfile==6 && selectIdAddressKf.selected" class="alert alert-info" role="alert">
            <strong>INFO: </strong>No hay departamentos registrados en la direccion seleccionada.
          </div>
              <button ng-show="selectIdAddressKf.selected && sessionidProfile!=3 && sessionidProfile!=5 && sessionidProfile!=6 && !noRecordsFound && !dptoNotFound" type="button" ng-model="collap1"  ng-class="!isCollapsed && collap==1 ? 'btn-success' : 'btn-primary'" class="col-md-4 col-md-offset-1 btn " ng-click="isCollapsed = !isCollapsed; switchTab(1); ">DEPARTAMENTOS</button>
              <button ng-show="selectIdAddressKf.selected && sessionidProfile!=3 && sessionidProfile!=5 && sessionidProfile!=6 && !noRecordsFound && !dptoNotFound" type="button" ng-model="collap2" ng-class="!isCollapsed && collap==2 ? 'btn-success' : 'btn-primary'" class="col-md-4 col-md-offset-2 btn " ng-click="isCollapsed = !isCollapsed; switchTab(2); getAllAttendant(selectIdAddressKf.selected.idAdress);">ENCARGADOS</button>
            <hr>
            <div uib-collapse="isCollapsed">
              <!--*********************DEPARTAMENTOS *******************************--> 
              <div ng-if="!isCollapsed && collap==1 && sessionidProfile>0 && recordsFound && !noRecordsFound && !dptoNotFound && selectIdAddressKf.selected!=undefined" class="panel panel-default">
              
                <div class="panel-body">
                  <div class="row">
                     <!-- Filter Department For Admins -->
                    <div ng-show="sessionidProfile!=3" class="form-group col-md-4">
                      <label style="padding-left: 15px;">Departamento</label>
                        <div class="col-xs-12 selectContainer">
                          <div class="input-group">
                              <span class="input-group-addon"><i class="glyphicon icon-building"></i></span>
                              <select ng-model="idDepartmentKf" ng-disabled="selectIdAddressKf.selected==''" ng-change="dayDataCollapseFn();" class="form-control" ng-options=" x.departmentFloor as x.departmentFloor for x in ListDpto " autofocus >
                                <option value="">Todos</option>
                              </select>
                          </div>
                      </div>
                    </div>
                    <!-- Filter Status For Admins -->
                    <!--<div ng-show="sessionidProfile!=3" class="form-group col-lg-2">
                      <label style="padding-left: 15px;">Status</label>
                        <div class="col-xs-12 selectContainer">
                          <div class="input-group">
                              <span class="input-group-addon"><i class="glyphicon icon-flag"></i></span>
                              <select ng-model="idStatusDeptoKf" ng-disabled="selectIdAddressKf.selected==''" ng-change="dayDataCollapseFn();" class="form-control" autofocus >
                                <option value="">Todos</option>
                                <option value="ASIGNADO">ASIGNADO</option>
                                <option value="DISPONIBLE">DISPONIBLE</option>
                              </select>
                          </div>
                      </div>
                    </div>-->
                    <div ng-show="sessionidProfile!=3" class="col-xs-4"><br>
                      <div>
                          <button type="button" ng-click="listUserDepto(1, selectIdAddressKf.selected.idAdress);" class="btn btn-info"><span data-toggle="tooltip" data-placement="right" title="Actualizar">
                              <i class="glyphicon glyphicon-refresh"></i></span>
                          </button>
                      </div>
                    </div>
                  </div>
                  <div style="overflow-x:auto">
                    <table ng-show="recordsFound && sessionidProfile!=0"  class="table table-sm  table-striped table-responsive">
                        <thead style=" background: #4d5d6f; color: white;">
                            <tr>
                                <th></th>
                                <th>ID</th>
                                <th>Departamento</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                          <!-- Shows the department List by the Selected Address-->
                            <tr style="align-content: center; cursor: pointer;" ng-repeat-start="item in ListDptoByTenant | filter: idStatusDeptoKf |filter: (!!idDepartmentKf || undefined) && {departmentFloor:idDepartmentKf}">
                              <td>
                                <div class="btn-group">
                                  <button type="button" ng-disabled="(sessionidProfile==3||sessionidProfile==6) && item.isAprobatedAdmin!=1" ng-click="selectTableRow($index, item.idDepartment); isAllowed=item.isAprobatedAdmin==1?item.idUserKf:null" class="btn btn-info btn-sm">
                                  <i ng-if="dayDataCollapse[$index]" title="Ver Habitantes" class="glyphicon glyphicon-plus"></i>
                                  <i ng-if="!dayDataCollapse[$index]" title="Ver Habitantes" class="glyphicon glyphicon-minus"></i>
                                    <span ng-if="item.departmentFloor=='Porteria'"> Ver Encargado</span>
                                    <span ng-if="item.departmentFloor!='Porteria'"> Ver Habitantes</span>
                                  </button>
                                  <button ng-if="(sessionidProfile==3 || sessionidProfile==6) && item.isAprobatedAdmin==1" type="button" class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">
                                    <span class="caret"></span>
                                  </button>
                                  <ul class="dropdown-menu" role="menu">
                                    <li><a href="" type="button" ng-click="modalConfirmation('removet', 0, item)"><i title="Ver Habitantes" class="glyphicon glyphicon-remove-sign"></i> Darme de Baja</a></li>
                                    
                                  </ul>
                                </div>
                                <div ng-if="((sessionidProfile!=5 && item.idUserKf==null || item.idUserKf==0) || (sessionidProfile!=5 || item.idUserK>0))" class="btn-group">
                                  <button ng-if="item.departmentFloor!='Porteria'" type="button" class="btn btn-info btn-sm" ng-click="sysFunctionsTenant('open', 'add', item.idDepartment); ">
                                    <span data-toggle="tooltip" data-placement="right" title="Registrar Habitante">
                                      <i class="glyphicon glyphicon-plus"></i> Registrar
                                    </span>
                                  </button>
                                  <button ng-if="item.departmentFloor=='Porteria'" type="button" class="btn btn-info btn-sm" ng-click="sysFunctionsAtt('open')">
                                    <span data-toggle="tooltip" data-placement="right" title="Registrar Encargados">
                                      <i class="glyphicon glyphicon-plus"></i> Registrar
                                    </span>
                                  </button>
                                </div>
                              </td>
                              <td>{{item.idDepartment}}</td>
                              <td>{{item.departmentFloor}}</td>
                              <!-- Status for Administrator -->
                              <td ng-if="sessionidProfile!=3">
                                <div class="btn-group">
                                  <!-- STATUS ASSGIN SUCESS -->
                                  <button type="button" ng-if="item.isRequesLowByProp==0 && item.isAprobatedAdmin==1 && (item.idUserKf!=null || item.idUserKf!=0)" class="btn btn-sm btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    CON PROPIETARIO &nbsp
                                  </button>
                                   <!-- STATUS AVAILABLE SUCESS -->
                                  <button type="button" ng-if="item.isRequesLowByProp==0 && item.isAprobatedAdmin==0 && (item.idUserKf==null || item.idUserKf==0)" class="btn btn-sm btn-primary dropdown-toggle" aria-haspopup="true" aria-expanded="false">
                                    SIN PROPIETARIO &nbsp
                                  </button>
                                   <!-- STATUS REQUESTED SUCESS -->
                                  <button type="button" ng-if="item.isRequesLowByProp==0 && item.isAprobatedAdmin==0 && item.idUserKf>0" class="btn btn-sm btn-warning dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    SOLICITADO &nbsp <span class="caret"></span>
                                  </button>
                                    <ul ng-if="item.isAprobatedAdmin==0 && (item.idUserKf!=null || item.idUserKf!=0) && item.isRequesLowByProp==0" class="dropdown-menu" role="menu">
                                        <!--<li><a ng-click="" ng-if="item.isAprobatedAdmin==0 && item.idUserKf>0"><i title="Activar" class="glyphicon glyphicon-ok-circle"> </i> Aprobar</a></li>
                                        <li><a ng-click="modalConfirmation('removet', 0, item)" ng-if="item.isAprobatedAdmin==1 && item.idUserKf>0 && item.isRequesLowByProp>=0"><i title="desactivar" class="glyphicon glyphicon-ban-circle"></i> Dar Baja</a></li>-->
                                        <li><a ng-click="fnAssignDepto(item.idDepartment,2)"><i title="desactivar" class="glyphicon glyphicon-ban-circle"></i> Cancelar</a></li>
                                        
                                    </ul>
                                </div>
                              </td>
                              <!-- Status for Owners -->
                              <td ng-if="sessionidProfile==3">
                                <div class="btn-group">
                                  <button type="button" ng-if="item.isRequesLowByProp==0 && item.isAprobatedAdmin==1 && item.idUserKf!=null" class="btn  btn-sm btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> APROBADO </button>
                                  <button type="button" ng-if="item.isAprobatedAdmin==0" class="btn btn-sm btn-warning dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> PENDIENTE</button>
                                  <button type="button" ng-if="item.isAprobatedAdmin<0" class="btn btn-sm btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> ELIMINADO</button>
                                  <button type="button" ng-if="item.isRequesLowByProp==1 && item.isAprobatedAdmin==1 && item.idUserKf!=null" class="btn btn-sm btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> BAJA SOLICITADA</button>
                                </div>
                              </td>
                            </tr>
                            <!-- Show the tenant & owner List by the Department selected -->
                            <tr collapse="dayDataCollapse[$index]" ng-repeat-end="">
                              <td colspan="4" >
                                  <div ng-show="tenantNotFound && sessionidProfile!=0 && selectIdAddressKf.selected" class="alert alert-info" role="alert">
                                      <strong>INFO: </strong>No hay Habitantes registrados en el departamento seleccionada.
                                  </div>
                                  <div ng-if="tenantNotFound!=true && sessionidProfile!=0" class="panel panel-default">
                                    <div class="panel-heading">
                                      <h3 class="panel-title">GESTION DE HABITANTES - DEPARTAMENTO NÂ°: <bold> {{item.departmentFloor}}</bold></h3>
                                    </div>
                                      <div class="panel-body">
                                        <div  class="row" >
                                            <!-- Filter Type of Tenant For Admins -->
                                            <div ng-if="sessionidProfile!=3" class="form-group col-lg-3">
                                              <label style="padding-left: 15px;">Tipo de Habitante</label>
                                                <div class="col-xs-12 selectContainer">
                                                  <div class="input-group">
                                                      <span class="input-group-addon"><i class="glyphicon icon-user"></i></span>
                                                      <select name="filterTenant" ng-model="$parent.filterTenant" class="form-control" required autofocus > 
                                                        <option value="" >Todos</option>
                                                        <option value="1" >Propietarios</option>
                                                        <option value="2" >Inquilinos</option>
                                                    </select>
                                                  </div>
                                                </div>
                                            </div>
                                            <div class="form-group col-lg-3">
                                            <label style="padding-left: 15px;">Buscar</label>
                                              <div class="col-xs-12">
                                                <div class="input-group">
                                                  <span class="input-group-addon"><i class="glyphicon glyphicon-search "></i></span>
                                                  <input type="text" class="form-control" ng-model="searchboxfilter" placeholder="Buscar...">
                                                </div>
                                              </div>
                                            </div>
                                            <div class="form-group col-lg-3">
                                              <div class="col-xs-12"><br>
                                                <div class="btn-group">
                                                    <button type="button" ng-click="sysFunctionsTenant('open', 'add', item.idDepartment); " class="btn btn-info">
                                                      <i data-toggle="tooltip" title="Agregar Habitante" class="glyphicon glyphicon-plus"></i> Habitante
                                                    </button>
                                                    <!--<button  title="Seleccionar" class="btn btn-lg btn-info">
                                                    <i class="glyphicon glyphicon-plus"></i>Asignar Inquilino
                                                    </button>-->
                                                </div>
                                              </div>
                                            </div>
                                        </div>
                                        <table  class="table table-hover table-responsive">
                                            <thead style=" background: #4d5d6f; color: white;">
                                              <tr >
                                                  <th>#</th>
                                                  <th>ID</th>
                                                  <th><i class="glyphicon glyphicon-user"> </i> Nombres</th>
                                                  <!--<th><i class="glyphicon glyphicon-earphone"> </i> Telefonos</th>-->
                                                  <!--<th><i class="glyphicon glyphicon-envelope"> </i> Correo</th>-->
                                                  <th>Perfil</th>
                                                  <th><i class="glyphicon icon-flag"> </i> Status</th>
                                                  <th><i class="glyphicon icon-calendar"> </i> Registrado</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr style="align-content: center;" ng-repeat="item in listTenant | filter: searchboxfilter | filter: {idTypeTenantKf:filterTenant}">
                                                  <td>
                                                    <div class="btn-group">
                                                      <button type="button" ng-click="select2EditTenant(item, idDeptoKf);" class="btn btn-sm btn-warning">
                                                      <i data-toggle="tooltip" data-placement="bottom"  title="Modificar Datos" class="glyphicon glyphicon-edit"></i>  
                                                      </button>
                                                      <button type="button" ng-click="modalConfirmation('removet', 0, item)" class="btn btn-sm btn-danger">
                                                      <i data-toggle="tooltip" data-placement="bottom"  title="Eliminar Habitante" class="glyphicon glyphicon-remove-circle"></i>  
                                                      </button>
                                                    </div>
                                                  </td>
                                                  <td>{{item.idUser}}</td>
                                                  <td>{{item.fullNameUser}}</td>
                                                  <!--<td>
                                                    <span ng-if="item.phoneNumberTenant">
                                                      <i class="glyphicon glyphicon-phone"></i>
                                                        <span >{{item.phoneNumberTenant}}</span>
                                                    </span>
                                                      <br ng-if="item.phoneNumberTenant"><br ng-if="item.phoneNumberTenant">
                                                    <span ng-if="item.phoneNumberContactTenant">
                                                      <i class="glyphicon glyphicon-earphone"></i>
                                                        <span >{{item.phoneNumberContactTenant}}</span>
                                                    </span>
                                                  </td>-->
                                                  <!--<td>{{item.emailTenant}}</td>-->
                                                  <td ng-if="item.idProfileKf==3 && item.idTypeTenantKf==1 && isAllowed==null" >Propietario <span style="padding-top: 10px; margin-top: 10px; text-align: center;" class="alert alert-warning"><i class="fas fa-lock"></i> No Autorizado</span></td>
                                                  <td ng-if="item.idProfileKf==3 && item.idTypeTenantKf==1 && item.idUser==isAllowed" >Propietario</td>
                                                  <td ng-if="item.idProfileKf==5 && item.idTypeTenantKf==2 && item.isDepartmentApproved==null">Inquilino &nbsp &nbsp&nbsp<span style="padding-top: 10px; margin-top: 10px; text-align: center;" class="alert alert-warning"><i class="fas fa-lock"></i> No Autorizado</span></td>
                                                  <td ng-if="item.idProfileKf==5 && item.idTypeTenantKf==2 && item.isDepartmentApproved==1" >Inquilino</td>
                                                  <td ng-if="item.idProfileKf==6 && item.idTypeTenantKf==1 && isAllowed==null">Encargado (Propietario)<span style="padding-top: 10px; margin-top: 10px; text-align: center;" class="alert alert-warning"><i class="fas fa-lock"></i> No Autorizado</span></td>
                                                  <td ng-if="item.idProfileKf==6 && item.idTypeTenantKf==1 && item.idUser==isAllowed">Encargado (Propietario)
                                                  <td ng-if="item.idProfileKf==6 && item.idTypeTenantKf==2 && item.isDepartmentApproved==null">Encargado(Inquilino)<span style="padding-top: 10px; margin-top: 10px; text-align: center;" class="alert alert-warning"><i class="fas fa-lock"></i> No Autorizado</span></td>
                                                  <td ng-if="item.idProfileKf==6 && item.idTypeTenantKf==2 && item.isDepartmentApproved==1">Encargado (Inquilino)</td>
                                                  <td> <!-- TD to Admins -->
                                                      <span  ng-if="item.idStatusKf==1" class="label label-success">
                                                        ACTIVO
                                                      </span>
                                                      <span  ng-if="item.idStatusKf==0" class="label label-warning" >
                                                        INACTIVO
                                                      </span>
                                                      <span  ng-if="item.idStatusKf<0" class="label label-danger">
                                                        Eliminado
                                                      </span>
                                                      <!--<ul ng-show="item.idStatusKf==0 || sessionidProfile==1" class="dropdown-menu">
                                                        <li><a ng-click="enabledTenant(item.idUser)" ng-if="item.idStatusKf<1"><i title="Activar" class="glyphicon glyphicon-ok-circle"> </i> Activar</a></li>
                                                        <li><a ng-click="disabledTenant(item.idUser)" ng-if="item.idStatusKf>0 && sessionidProfile!=3"><i title="desactivar" class="glyphicon glyphicon-ban-circle"></i> Desactivar</a></li>
                                                      </ul>-->&nbsp 
                                                      <!-- OWNERS -->
                                                      <button ng-if="(item.idProfileKf==3 && isAllowed==null) || (item.idProfileKf==6 && item.idTypeTenantKf==1 && isAllowed==null)" type="button" ng-click="approveOwnerDepto(idDeptoKf)" class="btn btn-sm btn-danger">
                                                      <i data-toggle="tooltip" data-placement="bottom" title="Autorizar Habitante" class="fas fa-lock"></i>  
                                                      </button>
                                                      <span ng-if="(item.idProfileKf==3 && item.idUser==isAllowed) || (item.idProfileKf==6 && item.idTypeTenantKf==1 && item.idUser==isAllowed)" class="label label-success">
                                                      <i data-toggle="tooltip" style="cursor: pointer;" data-placement="bottom"  title="Autorizado" class="fas fa-unlock-alt"></i>
                                                      </span>
                                                      <!--TENANT -->
                                                      <button ng-if="(item.idProfileKf==5 && item.isDepartmentApproved==null) || (item.idProfileKf==6 && item.idTypeTenantKf==2 && item.isDepartmentApproved==null)" type="button" ng-click="approveTenantDepto(item.idUser, 1)" class="btn btn-sm btn-danger">
                                                      <i data-toggle="tooltip" data-placement="bottom" title="Autorizar Habitante" class="fas fa-lock"></i>  
                                                      </button>
                                                      <span ng-if="(item.idProfileKf==5 && item.isDepartmentApproved==1) || (item.idProfileKf==6 && item.idTypeTenantKf==2 && item.isDepartmentApproved==1)" class="label label-success">
                                                      <i data-toggle="tooltip" style="cursor: pointer;" data-placement="bottom"  title="Autorizado" class="fas fa-unlock-alt"></i>
                                                      </span>
                                                  </td>
                                                  <td>{{item.dateCreated  | dateToISO | date:'MM/dd/yyyy'}}</td>
                                                  <!--<td>{{item.dateCreated}}</td>-->
                                              </tr>
                                            </tbody>
                                        </table>
                                      </div>
                                  </div>
                              </td>
                            </tr>
                        </tbody>
                    </table>
                    <div ng-if="sessionidProfile!=0"><br></div>
                  </div>
                </div>
              </div>
              <!--*********************ENCARGADOS ***********************************-->
              <div ng-if="!isCollapsed && collap==2 && sessionidProfile!=3 && !noRecordsFound && !dptoNotFound && selectIdAddressKf.selected!=undefined" class="panel panel-default">
                  <div ng-show="!attendantFound && sessionidProfile!=0 && selectIdAddressKf.selected" class="alert alert-info" role="alert">
                      <strong>INFO: </strong>No hay Encargados registrados para la direccion seleccionada.
                        <button type="button" ng-click="sysFunctionsAtt('open')" class="btn btn-info btn-sm"><i title="Registrar" class="glyphicon glyphicon-plus"></i> Registrar</button>
                  </div>
                  <div ng-if="attendantFound" class="panel-body">
                      <div  class="row" >
                          <!-- Filter Type of Tenant For Admins -->
                          <div ng-if="sessionidProfile!=0" class="form-group col-lg-2">
                                  <label style="padding-left: 15px;">Tipo de Encargados</label>
                                    <div class="col-xs-12 selectContainer">
                                      <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-tags"></i></span>
                                            <select name="filteroAttProfile" class="form-control" ng-model="$parent.filteroAttProfile" >
                                                <option value="" >Todos</option>
                                                <option value="1" >Otros</option>
                                                <option value="2" >Titular</option>
                                                <option value="3" >Suplente</option>
                                                <option value="4" >Intendente</option>
                                            </select>
                                      </div>
                                    </div>
                            </div>
                            <!-- Filter Type of Tenant For Admins -->
                          <div ng-if="sessionidProfile!=0" class="form-group col-lg-2">
                                  <label style="padding-left: 15px;">Estatus</label>
                                    <div class="col-xs-12 selectContainer">
                                      <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-tags"></i></span>
                                            <select name="filterUserStatus" class="form-control" ng-model="$parent.filterUserStatus" >
                                                <option value="" >Todos</option>
                                                <option value="1" >Activo</option>
                                                <option value="0" >Inactivo</option>
                                                <option value="-1" >eliminado</option>
                                            </select>
                                      </div>
                                    </div>
                            </div>
                          <div class="form-group col-lg-2">
                          <label style="padding-left: 15px;">Buscar</label>
                            <div class="col-xs-12">
                              <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-search "></i></span>
                                <input type="text" class="form-control" ng-model="searchboxfilter" placeholder="Buscar...">
                              </div>
                            </div>
                          </div>
                          <div class="form-group">
                          <div class="col-xs-4"><br>
                              <div >
                                  <button type="button" ng-click="getAllAttendant(selectIdAddressKf.selected.idAdress)" class="btn btn-info">
                                      <i title="Actualizar" class="glyphicon glyphicon-refresh"></i>
                                  </button>&nbsp
                                  <button type="button" ng-click="sysFunctionsAtt('open')" class="btn btn-info">
                                        <i title="Agregar Encargado" class="glyphicon glyphicon-plus"></i> Encargado
                                    </button>
                              </div>
                          </div>
                      </div>  
                      </div><br><br>
                      <div style="overflow-x:auto">
                        <table  class="table  table-striped table-responsive">
                            <thead style=" background: #4d5d6f; color: white;">
                              <tr style="text-align: center;">
                                  <th>ID</th>
                                  <th><i class="glyphicon glyphicon-user"> </i> Nombres</th>
                                  <!--<th><i class="glyphicon glyphicon-phone"> </i> Tlf Movil</th>
                                  <th><i class="glyphicon glyphicon-earphone"> </i> Tlf Fijo</th>-->
                                  <th><i class="glyphicon glyphicon-envelope"> </i> Correo</th>
                                  <th><i class="glyphicon glyphicon-user"> </i>Perfil</th>
                                  <th><i class="glyphicon icon-flag"> </i> Status</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr style="align-content: center;" ng-repeat="item in listAttendant | filter: {idTyepeAttendantKf:filteroAttProfile} | filter: {idStatusKf:filterUserStatus} | filter: searchboxfilter | orderBy: 'idUser'">
                                <td>
                                <div class="btn-group">
                                  <button type="button" ng-click="select2EditAtt(item);" class="btn btn-info btn-sm">{{item.idUser}}</button>
                                  <button type="button" class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">
                                    <span class="caret"></span>
                                  </button>
                                  <ul class="dropdown-menu" role="menu">
                                    <li><a href="" ng-click="select2EditAtt(item);"><i title="Modificar Datos" class="glyphicon glyphicon-edit"></i>  Editar</a></li>
                                    <li ng-if="item.idStatusKf<=0 "><a href="" ng-click="enabledUser(item.idUser)"><i title="Activar Habitante" class="glyphicon glyphicon-remove-circle"></i> Activar</a></li>
                                    <li ng-if="item.idStatusKf>0"><a href="" ng-click="disabledUser(item.idUser)"><i title="Desactivar Habitante" class="glyphicon glyphicon-remove-circle"></i> Desactivar</a></li>
                                    <li ng-if="item.idStatusKf>0" role="presentation">
                                    <div class="divider"></div>
                                    </li>
                                    <li ng-if="item.idStatusKf>0"><a href="" ng-click="modalConfirmation('removeatt', 0, item)"><i title="Eliminar Usuario" class="glyphicon glyphicon-trash"></i> Eliminar</a></li>
                                  </ul>
                                </div>
                                </td>
                                <td>{{item.fullNameUser}}</td>
                                <!--<td ng-if="item.phoneLocalNumberUser">{{item.phoneLocalNumberUser}}</td>
                                <td ng-if="!item.phoneLocalNumberUser"><span style="padding-top: 4px; margin-top: 10px; text-align: center;" class="alert alert-warning"> &nbsp &nbsp n/a</span></td>
                                <td ng-if="item.phoneNumberUser">{{item.phoneNumberUser}}</td>
                                <td ng-if="!item.phoneNumberUser"><span style="padding-top: 4px; margin-top: 10px; text-align: center;" class="alert alert-warning"> &nbsp &nbsp n/a</span>
                                </td>-->
                                <td>{{item.emailUser}}</td>
                                <td ng-if="!item.idTyepeAttendantKf"><label ng-if="item.idStatusKf==1" class="label label-warning">No Asignado
                                  </label></td>
                                <td ng-if="item.idTyepeAttendantKf==1">Otros ({{item.descOther}})</td>
                                <td ng-if="item.idTyepeAttendantKf==2">Titular</td>
                                <td ng-if="item.idTyepeAttendantKf==3">Suplente</td>
                                <td ng-if="item.idTyepeAttendantKf==4">Ayudante</td>
                                <td ng-if="item.idTyepeAttendantKf==5">Intendente</td>
                                <td> <!-- TD to Admins -->
                                  <label ng-if="item.idStatusKf==1" class="label label-success">ACTIVO
                                  </label>
                                  <label ng-if="item.idStatusKf==0" class="label label-warning">INACTIVO
                                  </label>
                                  <label ng-if="item.idStatusKf==-1" class="label label-danger"><del>ELIMINADO</del>
                                  </label>
                                </td>
                              </tr>
                            </tbody>
                        </table>
                        <br><br><br><br><br>
                      </div>
                      <!--<div>
                        <pagination 
                            total-items="totalItems" 
                            ng-model="currentPage" 
                            ng-change="pageChanged()" 
                            class="pagination-sm" 
                            items-per-page="itemsPerPage"
                            max-size="maxSize"
                            boundary-links="true">
                        </pagination>
                      </div>-->
                  </div>
              </div>
            </div>
        </div>
      </div>
      <div ng-if="sessionidProfile==5 || (sessionidProfile==6 && sessionidTypeTenant==2)">
          <div class="container-fluid justify-content-md-center col-md-10 col-md-offset-3">
            <div class="col-md-6">          
              <div class="hero-widget well well-md">
                <div class="icon">
                    <i class="glyphicon glyphicon-home"></i>
                </div>
                <div class="text">
                    <h4 class="text-muted">Consorcio: <span data-toggle="tooltip" data-placement="bottom" title="" class="badge badge-light">{{sessionNameAdress}}</span></h4>
                </div>
                <div class="options">
                  <h5 class="text-muted">Departamento: <span data-toggle="tooltip" data-placement="bottom" title="" class="badge badge-light">{{deptoTenant}}</span>
                    <button type="button" ng-click="modalConfirmation('removet', 0, sysLoggedUser)" class="pull-right btn btn-sm btn-danger">
                    <i data-toggle="tooltip" data-placement="bottom" title="Darme de baja" class="fas fa-trash-alt">
                    </i>
                  </button>
                  </h5>

                </div>
                

              </div>
            </div>
          </div>
          <div ng-if="!sessionIdDeparmentKf && !sessionidAddress" class="container-fluid justify-content-md-center col-md-12">
            <form class="form-horizontal" name="frmDpto" ng-submit="fnAssignDepto(select.idDepartmentKf,0)">
                  <fieldset>
                    <!-- Company Name-->    
                    <div ng-show="sessionidProfile!=3 && sessionidProfile!=5 && sessionidProfile!=6" class="form-group col-md-6">
                      <label style="padding-left: 15px;">Administracion</label>
                        <div class="col-xs-12">
                          <div class="input-group">
                              <span class="input-group-addon"><i class="icon-suitcase"></i></span>
                            <input ng-show="sessionidProfile==4" name="companyN"  disabled class="form-control" ng-model="$parent.companyN" />

                              <ui-select ng-show="sessionidProfile==1" ng-model="selectIdCompanyKf.selected" on-select="onSelectCallback()" ng-change="officeListByCompnayID(selectIdCompanyKf.selected.idCompany);">
                                <ui-select-match allow-clear="true" placeholder="Seleccione una administracion">{{$select.selected.nameCompany}}</ui-select-match>
                                  <ui-select-choices repeat="data in listCompany | filter: $select.search">
                                    <div ng-bind-html="data.nameCompany | highlight: $select.search"></div>
                                      <small ng-bind-html="data.mail_admin | highlight: $select.search"></small>
                                  </ui-select-choices>
                              </ui-select>
                          </div>
                        </div>
                    </div>
                    <!-- Address for Owner-->      
                    <div ng-show="sessionidProfile==3 || sessionidProfile==5 || sessionidProfile==6" class="form-group col-md-6">
                       <label style="padding-left: 15px;">Consorcio</label>
                          <div class="col-xs-12">
                            <div class="input-group">
                              <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
                              <ui-select name="idAddressAtt" ng-disabled="sessionidProfile==1 && selectIdCompanyKf.selected==''" ng-change="getDeparment(1,selectIdAddressKf.selected.idAdress); listUserDepto(1, selectIdAddressKf.selected.idAdress); collap=1; isCollapsed=false;" ng-required="sessionidProfile!=4" ng-model="selectIdAddressKf.selected" autofocus>
                                <ui-select-match allow-clear="true" placeholder="Seleccione una direccion">{{$select.selected.nameAdress}}</ui-select-match>
                                  <ui-select-choices repeat="data in ListAddress | filter: $select.search">
                                    <div ng-bind-html="data.nameAdress | highlight: $select.search"></div>
                                      <!--<small>Costo de Gestion: </small><small ng-bind-html="item.priceManagement | highlight: $select.search"></small>
                                      <small>Costo de Envio: </small><small ng-bind-html="item.priceShipping | highlight: $select.search"></small>-->
                                  </ui-select-choices>
                              </ui-select>
                              <span ng-show="selectIdAddressKf.selected!=0" style="cursor: pointer;" class="input-group-addon"><i ng-click="getDeparment(1,selectIdAddressKf.selected.idAdress); listUserDepto(1,selectIdAddressKf.selected.idAdress);" class="glyphicon glyphicon-refresh"></i></span>
                            </div>
                          </div>
                    </div>
                    <!-- Address for Admins-->      
                    <div ng-show="sessionidProfile!=3 && sessionidProfile!=5 && sessionidProfile!=6" class="form-group col-md-6">
                        <label style="padding-left: 15px;">Consorcio</label>
                          <div class="col-xs-12">
                            <div class="input-group">
                              <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
           
                              <ui-select name="idAddressAtt" ng-disabled="(!companyFound && sessionidProfile==1)" ng-change="getDeparment(1,selectIdAddressKf.selected.idAdress); listUserDepto(1,selectIdAddressKf.selected.idAdress); getAllAttendant(selectIdAddressKf.selected.idAdress); idDepartmentKf=''; " ng-required="sessionidProfile!=3" ng-model="selectIdAddressKf.selected" autofocus>
                                <ui-select-match allow-clear="true" placeholder="Seleccione una direccion">{{$select.selected.nameAdress}}</ui-select-match>
                                  <ui-select-choices repeat="data in listOffice | filter: $select.search">
                                    <div ng-bind-html="data.nameAdress | highlight: $select.search"></div>
                                      <!--<small ng-bind-html="item.nameCompany | highlight: $select.search"></small>-->
                                  </ui-select-choices>
                              </ui-select>
                              <span ng-show="selectIdAddressKf.selected!=0 && sessionidProfile==3" style="cursor: pointer;" class="input-group-addon"><i ng-click="listUserDepto(1,selectIdAddressKf.selected.idAdress); getAllAttendant(selectIdAddressKf.selected.idAdress);" class="glyphicon glyphicon-refresh"></i></span>
                            </div>
                          </div>
                    </div>
                    <!-- Select Department -->
                          <div ng-show="sessionidProfile==3 || sessionidProfile==5 || sessionidProfile==6" class="form-group col-md-4">
                            <label style="padding-left: 15px;">Departamento</label>
                              <div class="col-xs-12 selectContainer">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon icon-building"></i></span>
                                    <select ng-model="select.idDepartmentKf"  ng-disabled="dptoNotFound!=false" class="form-control" ng-options="x.idDepartment as x.departmentFloor for x in ListDpto " required autofocus >
                                      <option value="">Seleccione</option>
                                    </select>
                                </div>
                            </div>
                          </div>
                    <!-- Actions Button -->
                    <div ng-show="sessionidProfile==3 || sessionidProfile==5 || sessionidProfile==6" class="form-group col-md-2">
                      <br>
                      <div class="col-xs-12">
                        <button type="submit" class="btn btn-primary" ng-disabled="dptoNotFound!=false" >Asociar</button>
                      </div>
                    </div>
                  </fieldset>
            </form>
          </div>
      </div>
      <!-- Modal Confirmation -->
      <div class="modal fade" id="confirmCodeModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="ModalLabel">Soporte coferba </h5>
            </div>
            <div class="modal-body">
            <form name="frmSecCode" class="form-horizontal" autocomplete="off" role="form" novalidate>
              <div class="form-group" ng-class="{'has-error': frmSecCode.checkCode.$dirty && frmSecCode.checkCode.$invalid}">
                <div class="col-md-12">
                  <div class="inner-addon right-addon">
                      <input id="checkCode" name="checkCode" class="form-input" ng-blur="inputCheckCss('checkCode', 'i');" ng-model="register.securityCode" type="password" required autofocus />
                      <label>Codigo de Validacion</label> 
                      <i class="glyphicon glyphicon-lock"></i>
                    <span class="bar"></span>
                    </div>
                  </div>
              </div>
                </form>
            </div>
            <div class="modal-footer">
              <button type="button" ng-click="sysCheckCode()" class="btn btn-success">Validar</button>
            </div>
          </div>
        </div>
      </div>
      <!-- //Modal Confirmation -->
    </div>
  </div>
</div>
