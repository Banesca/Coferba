<!-- CUSTOMER CONTRACT FORM -->
<div id="RegisterAlarmService" class="modal fade bd-example-modal-lg" style="top: 0px;" role="dialog">
  	<div class="modal-dialog modal-lg" >
	    <div class="modal-content">
          	<div class="modal-header">
          		<button type="button" class="close" ng-click="modalConfirmation('closeServiceWindow', 0, null)"><span aria-hidden="true"><i alt="Cerrar" class="glyphicon glyphicon-remove-sign"> </i></span><span class="sr-only">Close</span></button>
            	<h3 class="modal-title"><i class="product-success fas fa-wrench"></i> NUEVO SERVICIO ALARMA</h3>
        	</div>
    		<div class="modal-body"  style="overflow-y: scroll;">
				<!-- FORM CONTAINER-->
				<form class="form-horizontal" name="fCustomerNewService" novalidate>
					<fieldset>
						<!-- ALARM: Puerta -->
						<div class="form-group col-md-12" ng-class="
								{	'has-success': 
									service.new.name!='' && fCustomerNewService.service_name.$valid,
								 	'has-error':  
									(service.new.name=='' || service.new.name==undefined) && fCustomerNewService.service_name.$touched,
								}">
						  <label style="padding-left: 15px;">Nombre</label><br>
							  <div class="col-md-6 col-xs-12">
								<div class="input-group">
									<span class="input-group-addon"><i class="fas fa-tag"></i></span>
									<input name="service_name" type="text" class="form-control" ng-model="service.new.name" required="true" />
							  </div>
							</div>
						</div>
						<!-- ALARM: Puerta -->
						<div class="form-group col-md-6" ng-class="
									{	'has-success': 
										service.new.idContratoFk!='' && fCustomerNewService.service_contract.$valid,
									 	'has-error':  
										(service.new.idContratoFk=='' || service.new.idContratoFk==undefined) && fCustomerNewService.service_contract.$touched,
									}">
						  <label style="padding-left: 15px;">Contrato asociado</label>  
							  <div class="col-xs-12">
								<div class="input-group">
									<span class="input-group-addon"><i class="fas fa-file-contract"></i></span>
									<select name="service_contract" 
									class="form-control" 
									ng-options="item.idContrato as item.numeroContrato for item in rsCustomerContractListData" ng-model="service.new.idContratoFk"
									ng-change="switchContractService(service.new)" required="true" autofocus >
									    <option class="text-uppercase" value="">Selecciona un contrato</option>
								    </select>
							  </div>
							</div>
						</div>
						<!-- ALARM: Maintenance Type -->					  
						<div class="form-group col-md-6" >  
						  	<label style="padding-left: 15px;">Tipo de mantenimiento</label>
						    <div class="col-xs-12 ">
							    <div class="input-group">
							    	<span class="input-group-addon"><i class="far fa-calendar-alt"></i></span>
					    			<input name="service_mnt_type" type="text" class="form-control" ng-disabled="true" ng-model="service.new.MntType" />
					    		</div>
					    	</div>
						</div>					
						<!-- ALARM: Start_date -->
						<div class="form-group col-md-6" ng-class="
								{	'has-success': 
									service.new.dateUp!='' && fCustomerNewService.service_start_date.$valid,
								 	'has-error':  
									(service.new.dateUp=='' || service.new.dateUp==undefined) && fCustomerNewService.service_start_date.$touched,
								}">
						  <label style="padding-left: 15px;">Fecha de alta</label>  
							  <div class="col-xs-12">
								<div class="input-group">
									<span class="input-group-addon"><i class="far fa-calendar-alt"></i></span>
									<input name="service_start_date" type="text" ng-keydown="fnLoadPhoneMask()" class="form-control input--date" required="true" ng-model="service.new.dateUp" />
							  </div>
							</div>
						</div>
						<!-- ALARM: End_date -->
						<div class="form-group col-md-6">
						  <label style="padding-left: 15px;">Fecha de baja</label>  
							  <div class="col-xs-12">
								<div class="input-group">
									<span class="input-group-addon"><i class="far fa-calendar-alt"></i></span>
									<input name="service_end_date" type="text" ng-keydown="fnLoadPhoneMask()"  ng-disabled="true" class="form-control input--date" ng-model="service.new.end_date" />
							  </div>
							</div>
						</div>
						<!-- Empresa_de_monitoreo -->
						<div class="form-group col-md-6" ng-class="
									{	'has-success': 
										service.new.idCompanyMonitorFK!='' && fCustomerNewService.service_monitorCompany.$valid,
									 	'has-error':  
										(service.new.idCompanyMonitorFK=='' || service.new.idCompanyMonitorFK==undefined) && fCustomerNewService.service_monitorCompany.$touched,
									}">
						  <label style="padding-left: 15px;">Empresa de monitoreo</label>  
							  <div class="col-xs-12">
								<div class="input-group">
									<span class="input-group-addon"><i class="fas fa-broadcast-tower"></i></span>
									<select name="service_monitorCompany" 
									class="form-control" 
									ng-options="item.idMonitorCompany as item.monitorCompany for item in rsMonitorCompanyListData" ng-model="service.new.idCompanyMonitorFK"
									required="true" autofocus >
									    <option class="text-uppercase" value="">Selecciona una empresa</option>
								    </select>
							  </div>
							</div>
						</div>	
						<!-- Empresa_de_monitoreo -->
						<!-- Numero de abonado -->					  
						<div class="form-group col-md-6" ng-class="
								{	'has-success': 
									service.new.numberCustomer!='' && fCustomerNewService.service_numberCustomer.$valid,
								 	'has-error':  
									(service.new.numberCustomer=='' || service.new.numberCustomer==undefined) && fCustomerNewService.service_numberCustomer.$touched,
								}">  
						  	<label style="padding-left: 15px;">NÂ° de Abonado</label>
						    <div class="col-xs-12">
							    <div class="input-group">
							    	<span class="input-group-addon"><i class="far fa-sticky-note"></i></span>
					    			<input name="service_numberCustomer" type="text" class="form-control" ng-model="service.new.numberCustomer" />
					    		</div>
					    	</div>
						</div>			
						<div class="form-group col-md-12 text-badge"> <h3>Sistema a Instalar</h3></div>		
						<!-- Left Colunm -->						
						<div class="well-checkbox form-group col-md-6 n-padding-l n-padding-r">
							<!-- Alarmas: panel de alarma -->
							<div class="form-group col-md-12" ng-class="
									  			{	'has-success': 
									  				service.new.alarmPanel.selected!=undefined && fCustomerNewService.service_alarm_panel.$valid,
									  			 	'has-error':  
									  				(service.new.alarmPanel.selected==undefined) && fCustomerNewService.service_alarm_panel.$touched,
									  			}">
							<div class="col-md-8"><label style="padding-left: 15px;">Panel de alarma</label></div>
							<div class="pull-right col-md-4"><button  data-toggle="tooltip" data-placement="top" title="Ver" ng-disabled="service.new.alarmPanel.selected==undefined" ng-click="compServiceProductDetailsFn(service.new.alarmPanel.selected, productListType.PANEL_ALARM)" class="btn btn-xs btn-warning"><i class="fas fa-external-link-alt"></i> Detalles</button>
							  	<button ng-if="service.new.alarmPanel.selected!=undefined" data-toggle="tooltip" data-placement="right" title="Remover" ng-click="removeProductDetailsFn(service.new.alarmPanel.selected, productListType.PANEL_ALARM, null)" class="btn btn-xs btn-danger"><i class="far fa-times-circle"></i></button></div>  
							    <div class="col-xs-12 selectContainer">							   
								    <div class="input-group">
						              <span class="input-group-addon"><i class="fas fa-door-open"></i></span>
						              <ui-select name="service_alarm_panel"  
						              			 ng-change="compServiceProductDetailsFn(service.new.alarmPanel.selected, productListType.PANEL_ALARM, null)" 
						              			 ng-model="service.new.alarmPanel.selected"
						              			 ng-required="true"
						              			 ng-disabled="service.new.alarmPanel.selected!=undefined"
						              			 theme="bootstrap" autofocus>
						                  <ui-select-match placeholder="Selecciona una opci&#243;n">({{$select.selected.brand}}) - {{$select.selected.model}}</ui-select-match>
						                    <ui-select-choices repeat="item in productListByType.PANEL_ALARM | filter: $select.search">
						                      <div ng-bind-html="item.descriptionProduct | highlight: $select.search"></div>
						                      	<small ng-bind-html="item.model | highlight: $select.search"></small>
						                      	<small ng-bind-html="item.brand | highlight: $select.search"></small>					                      	
						                    </ui-select-choices>
						                    <ui-select-no-choice>
											    No hay resultados, contacte are de soporte.
										  	</ui-select-no-choice>
						                </ui-select>
						            </div>
							  	</div>
							</div>							
							<!-- ALARM: entranceReader -->
							<div class="form-group col-md-12" ng-class="
									  			{	'has-success': 
									  				service.new.alarmKeyboard.selected!=undefined && fCustomerNewService.service_teclado_alarma.$valid,
									  			 	'has-error':  
									  				(service.new.alarmKeyboard.selected==undefined) && fCustomerNewService.service_teclado_alarma.$touched,
									  			}">
							<div class="col-md-8"><label style="padding-left: 15px;">Teclado de Alarma</label></div>
							<div class="pull-right col-md-4"><button  data-toggle="tooltip" data-placement="top" title="Ver" ng-disabled="service.new.alarmKeyboard.selected==undefined" ng-click="compServiceProductDetailsFn(service.new.alarmKeyboard.selected, productListType.TECLADO_ALARM)" class="btn btn-xs btn-warning"><i class="fas fa-external-link-alt"></i> Detalles</button>
							  	<button ng-if="service.new.alarmKeyboard.selected!=undefined" data-toggle="tooltip" data-placement="right" title="Remover" ng-click="removeProductDetailsFn(service.new.alarmKeyboard.selected, productListType.TECLADO_ALARM, null)" class="btn btn-xs btn-danger"><i class="far fa-times-circle"></i></button></div>  
							    <div class="col-xs-12 selectContainer">							   
								    <div class="input-group">
						              <span class="input-group-addon"><i class="fas fa-door-open"></i></span>
						              <ui-select name="service_teclado_alarma"  
						              			 ng-change="compServiceProductDetailsFn(service.new.alarmKeyboard.selected, productListType.TECLADO_ALARM, null)" 
						              			 ng-model="service.new.alarmKeyboard.selected"
						              			 ng-required="true"
						              			 ng-disabled="service.new.alarmKeyboard.selected!=undefined"
						              			 theme="bootstrap" autofocus>
						                  <ui-select-match placeholder="Selecciona una opci&#243;n">({{$select.selected.brand}}) - {{$select.selected.model}}</ui-select-match>
						                    <ui-select-choices repeat="item in productListByType.TECLADO_ALARM | filter: $select.search">
						                      <div ng-bind-html="item.descriptionProduct | highlight: $select.search"></div>
						                      	<small ng-bind-html="item.model | highlight: $select.search"></small>
						                      	<small ng-bind-html="item.brand | highlight: $select.search"></small>					                      	
						                    </ui-select-choices>
						                    <ui-select-no-choice>
											    No hay resultados, contacte are de soporte.
										  	</ui-select-no-choice>
						                </ui-select>
						            </div>
							  	</div>
							</div>							
							<!-- ALARM: exitReader -->
							<div class="form-group col-md-12" ng-class="
								  			{	'has-success': 
								  				service.new.zonesQttyInstalled.length>0 && 
								  				service.new.zonesQttyInstalled.length!=0 && fCustomerNewService.service_zonas_cant_instaladas.$valid,
								  			 	'has-error':  
								  				(service.new.zonesQttyInstalled.length==0 || 
								  				service.new.zonesQttyInstalled==0 || service.new.zonesQttyInstalled==undefined) && fCustomerNewService.service_zonas_cant_instaladas.$touched,
								  			}">
							  <label style="padding-left: 15px;">Cantidad de Zonas Instaladas</label>  
								  <div class="col-xs-12">
									<div class="input-group">
										<span class="input-group-addon"><i class="fas fa-sim-card"></i></span>
											<input name="service_zonas_cant_instaladas" type="text" ng-keydown="fnLoadPhoneMask()" class="form-control input--number" ng-model="service.new.zonesQttyInstalled" />
								  </div>
								</div>
							</div>					
						</div>
						<!-- Right Colunm -->
						<div class="well-checkbox form-group col-md-6" style="height: 262px;">
							<!-- Alarmas: Sensores de alarma -->
							<div class="col-md-12">
								<div class="col-md-8">
									<label class="clf-p-left">Sensores de alarma</label></div>
								<div class="pull-right col-md-4" style="padding-bottom: 5px;"><button ng-click="loadDetailModalWindow(service.new.sensor.selected)" ng-disabled="service.new.sensor.selected==undefined" class="btn btn-sm btn-success"><i class="fas fa-plus"></i> Zona</button></div>
							    <div class="selectContainer">							   
								    <div class="col-md-12 input-group">
						              	<span class="input-group-addon"><i class="far fa-dot-circle"></i></span>
						              	<ui-select name="service_alarm_sensor"
						              			 ng-model="service.new.sensor.selected"
						              			 ng-required="list_sensors.length==0"
						              			 theme="bootstrap" autofocus>
						                	<ui-select-match placeholder="Selecciona una opci&#243;n">({{$select.selected.brand}}) - {{$select.selected.model}}</ui-select-match>
						                    <ui-select-choices repeat="item in productListByType.SENSOR_ALARM | filter: $select.search">
						                    	<div ng-bind-html="item.descriptionProduct | highlight: $select.search"></div>
						                      	<small ng-bind-html="item.model | highlight: $select.search"></small>
						                      	<small ng-bind-html="item.brand | highlight: $select.search"></small>					                      	
						                    </ui-select-choices>
						                    <ui-select-no-choice>
											    No hay resultados, contacte are de soporte.
										  	</ui-select-no-choice>
						                </ui-select>
						            </div>
							  	</div>
								<div class="well-checkbox n-padding-t n-padding-b n-padding-l n-padding-r" style="margin-left: 0px;margin-right: 0px;">
								  	<table ng-if="list_sensors.length>0">
								    	<tr ng-repeat="sensor in list_sensors">
								    		<td style="width: 5%; padding: 0 0px 0 10px;"><label style="font-size: 80%" class="label label-default">{{$index+1}}</label></td>
								      		 <td style="width: auto"><span style="font-size: 85%" class="text-muted text-uppercase text-box">{{sensor.classification | uppercase}} </span></td>
								      		<!--<td style="width: 15%"><span class="text-muted text-box" style="font-size: 85%">Modelo:<label style="font-size: 85%" class="label label-default">{{sensor.model | uppercase}}</label></span></td>-->
								      		<td style="width: auto"><label data-toggle="tooltip" data-placement="right" title="Marca" style="font-size: 85%" class="label label-default"><i class="text-warning fas fa-tag"> </i> {{sensor.brand | uppercase}}</label></td>
								          	<td style="padding-bottom: 5px;">
								            	<button data-toggle="tooltip" data-placement="top" title="Ver" ng-click="subItemServiceProductDetailsFn(sensor)" ng-disabled="!sensor.idBatteryFk" class="btn btn-xs btn-warning"><i class="fas fa-external-link-alt"></i></button>
							  					<button ng-if="sensor.idBatteryFk" data-toggle="tooltip" data-placement="top" title="Remover" ng-click="removeSubItemProductDetailsFn(sensor)" class="btn btn-xs btn-danger"><i class="far fa-times-circle"></i></button>

								          	</td>
								      	</tr>
								  	</table>
								  	<div ng-if="list_sensors.length==0" class="text-uppercase banner-no-rows banner-no-rows-padding-1 banner-no-rows-warning"><h5><i class="fas fa-exclamation-triangle"> </i> No hay baterias o ups cargados</h5></div>
								</div>						  	
							</div>							
						</div>
						<!-- Left Colunm -->
						<div class="well-checkbox form-group col-md-6" style="height: 262px;">
							<!-- Cameras: Enery Backup -->
							<div class="col-md-12">
								<div class="col-md-8">
									<label class="clf-p-left">Backups de Energia</label></div>
								<div class="pull-right col-md-4" style="padding-bottom: 5px;"><button ng-click="loadDetailModalWindow(service.new.batteries.selected)" ng-disabled="service.new.batteries.selected==undefined" class="btn btn-sm btn-success"><i class="fas fa-plus"></i> Agregar</button></div>
							    <div class="selectContainer">							   
								    <div class="col-md-12 input-group">
						              	<span class="input-group-addon"><i class="fas fa-car-battery"></i></span>
						              	<ui-select name="service_energyBackups"
						              			 ng-model="service.new.batteries.selected"
						              			 ng-required="list_batteries.length==0"
						              			 theme="bootstrap" autofocus>
						                	<ui-select-match placeholder="Selecciona una opci&#243;n">({{$select.selected.brand}}) - {{$select.selected.model}}</ui-select-match>
						                    <ui-select-choices repeat="item in productListByType.BACKUP_ENERGIA | filter: $select.search">
						                    	<div ng-bind-html="item.descriptionProduct | highlight: $select.search"></div>
						                      	<small ng-bind-html="item.model | highlight: $select.search"></small>
						                      	<small ng-bind-html="item.brand | highlight: $select.search"></small>					                      	
						                    </ui-select-choices>
						                    <ui-select-no-choice>
											    No hay resultados, contacte are de soporte.
										  	</ui-select-no-choice>
						                </ui-select>
						            </div>
							  	</div>
								<div class="well-checkbox n-padding-t n-padding-b" ng-class="{'n-padding-l n-padding-r':list_batteries.length>0}" style="margin-left: 0px;margin-right: 0px;">
								  	<table ng-if="list_batteries.length>0">
								    	<tr ng-repeat="battery in list_batteries">
								    		<td style="width: 5%; padding: 0 0px 0 10px;"><label style="font-size: 80%" class="label label-default">{{$index+1}}</label></td>
								      		 <td style="width: auto"><span style="font-size: 85%" class="text-muted text-uppercase text-box">{{battery.classification | uppercase}} </span></td>
								      		<!--<td style="width: 15%"><span class="text-muted text-box" style="font-size: 85%">Modelo:<label style="font-size: 85%" class="label label-default">{{battery.model | uppercase}}</label></span></td>-->
								      		<td style="width: auto"><label data-toggle="tooltip" data-placement="right" title="Marca" style="font-size: 85%" class="label label-default"><i class="text-warning fas fa-tag"> </i> {{battery.brand | uppercase}}</label></td>
								          	<td style="padding-bottom: 5px;">
								            	<button data-toggle="tooltip" data-placement="top" title="Ver" ng-click="subItemServiceProductDetailsFn(battery)" ng-disabled="!battery.idBatteryFk" class="btn btn-xs btn-warning"><i class="fas fa-external-link-alt"></i></button>
							  					<button ng-if="battery.idBatteryFk" data-toggle="tooltip" data-placement="top" title="Remover" ng-click="removeSubItemProductDetailsFn(battery)" class="btn btn-xs btn-danger"><i class="far fa-times-circle"></i></button>

								          	</td>
								      	</tr>
								  	</table>
								  	<div ng-if="list_batteries.length==0" class="text-uppercase banner-no-rows banner-no-rows-padding-1 banner-no-rows-warning"><h5><i class="fas fa-exclamation-triangle"> </i> No hay baterias o ups cargados</h5></div>
								</div>						  	
							</div>
						</div>
						<div class="well-checkbox form-group col-md-6 n-padding-l n-padding-r" style="height: 262px;">
				            <div class="form-group col-md-12 col-xs-12">
				            	<div class="col-md-12 col-xs-5"><label class="clf-size clf-p-left">Tipo de Conexion remoto:</label></div>
				            	<div class="col-md-12 col-xs-12">
				                	<input id="connectionModule1" class="radio-2x" type="radio" ng-click="compServiceModuleConnectionDetailsFn(service.new.connectionModule)" name="connectionModule" value="linea" ng-model="service.new.connectionModule" required autofocus>
				                    <label for="connectionModule1" class="radio-2x-label">
				                      <span>Linea Telefonica</span>
				                    </label>
				                </div>
				                <div class="col-md-12 col-xs-12">
				                	<input id="connectionModule2" class="radio-2x" type="radio" ng-click="compServiceModuleConnectionDetailsFn(service.new.connectionModule)" name="connectionModule" value="ip" ng-model="service.new.connectionModule" required autofocus>
				                    <label for="connectionModule2" class="radio-2x-label">
				                      <span>Modulo IP</span>
				                    </label> 
				                </div>
				                <div class="col-md-12 col-xs-12">
				                	<input id="connectionModule3" class="radio-2x" type="radio" ng-click="compServiceModuleConnectionDetailsFn(service.new.connectionModule)" name="connectionModule" value="gprs" ng-model="service.new.connectionModule" required autofocus>
				                    <label for="connectionModule3" class="radio-2x-label">
				                      <span>Modulo GPRS</span>
				                    </label> 
				                </div>			                
				            </div>
						</div>
						<div class="form-group col-md-12">
							<div class="input-group col-md-6">
								<button  ng-click="addBatteryFn(battery, 'new')" class="btn btn-sm btn-warning"><i class="fas fa-plus"></i> Datos Adicionales</button>
							</div>
						</div>
						<!-- Observaciones Generales -->
						<div class="form-group col-md-12">
						  <label class="col-xs-12" >Observaciones Generales</label> 
								<textarea style="resize: none;" name="ObserGenerales" rows="3" placeholder="indique las Observaciones." class="form-control" ng-model="service.new.generalComments" ></textarea>							
						</div>
					</fieldset>
				</form>
				<div class="clearfix"> </div> 
			</div>
			<!-- Actions Button -->
            <div class="modal-footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-6 pull-right">
                        <button type="submit" ng-click="" ng-disabled="fCustomerNewService.$invalid" class="btn btn-labeled btn-success">
                            <span class="btn-label"><i class="glyphicon glyphicon-send"></i> </span>Enviar</button>
                        <a ng-click="modalConfirmation('closeServiceWindow', 0, null)" type="button" class="btn btn-labeled btn-danger">
                            <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>Cancelar</a>
                    </div>
                </div>
            </div>
		</div>
	</div>
</div>
<!-- // CUSTOMER CONTRACT FORM -->